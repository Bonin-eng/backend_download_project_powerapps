# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Home Screen:
    Properties:
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |-
        =ClearCollect(colLancamento, Filter(sigd_frota_lancamentos, id_referencia_condutor = varUsuario.ID_Referencia));

        ClearCollect(
            colMesAno,
            Distinct(
                AddColumns(
                    colLancamento,
                    MesRef,
                    Text(data_viagem, "[$-pt-BR]mmm/yyyy")   // Formata Mês/Ano
                ),
                MesRef
            )
        );
    Children:
      - cpm_Tela_Geral_1:
          Control: CanvasComponent
          ComponentName: cpm_Tela_Geral
          Properties:
            Height: =1136
            ListaDasTelas: =colTelas
      - Container7:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Height: =Parent.Height - 60
            LayoutDirection: =LayoutDirection.Vertical
            Width: =Parent.Width - Self.X * 2
            X: =10
          Children:
            - Container6_2:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  DropShadow: =DropShadow.None
                  FillPortions: =0
                  Height: =60
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - Label1_12:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(255, 255, 255, 1)
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Semibold
                        Height: =60
                        Size: =16
                        Text: ="TELA INICIAL"
                        Width: =Parent.Width - Self.X
                        Wrap: =false
            - Container6_3:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  DropShadow: =DropShadow.None
                  FillPortions: =0
                  Height: =125
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - Container7_1:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.Semilight
                        Fill: =RGBA(45, 65, 93, 1)
                        Height: =110
                        RadiusBottomLeft: =10
                        RadiusBottomRight: =10
                        RadiusTopLeft: =10
                        RadiusTopRight: =10
                        Width: =Parent.Width - Self.X * 2
                        Y: =10
                      Children:
                        - img_colab:
                            Control: Image@2.2.3
                            Properties:
                              BorderColor: =RGBA(255, 255, 255, 1)
                              BorderThickness: =2
                              DisabledBorderColor: =RGBA(0, 0, 0, 0)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              Fill: =RGBA(45, 65, 93, 1)
                              Height: =70
                              HoverBorderColor: =
                              HoverFill: =
                              Image: =UsuáriosdoOffice365.UserPhoto(User().Email)
                              ImagePosition: =ImagePosition.Fill
                              PressedBorderColor: =
                              PressedFill: =
                              RadiusBottomLeft: =90
                              RadiusBottomRight: =90
                              RadiusTopLeft: =90
                              RadiusTopRight: =90
                              TabIndex: =-2
                              Width: =70
                              X: =20
                              Y: =20
                        - Label9_1:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              BorderStyle: =BorderStyle.None
                              BorderThickness: =1
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(0, 0, 0, 0)
                              DisabledColor: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =1
                              Font: =Font.Arial
                              FontWeight: =FontWeight.Semibold
                              Size: =14
                              Text: =Upper(User().FullName)
                              Width: =286
                              X: =100
                              Y: =20
                        - Image5:
                            Control: Image@2.2.3
                            Properties:
                              AutoDisableOnSelect: =false
                              BorderColor: =RGBA(0, 18, 107, 1)
                              DisabledBorderColor: =RGBA(0, 0, 0, 0)
                              DisplayMode: =DisplayMode.View
                              Fill: =RGBA(45, 65, 93, 1)
                              Height: =90
                              HoverBorderColor: =
                              HoverFill: =
                              Image: ='logo-bonin-light 1'
                              PressedBorderColor: =
                              PressedFill: =
                              Width: =228
                              X: =386
                              Y: =10
            - Container6_4:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Height: =60
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - Container9:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        BorderColor: =RGBA(45, 65, 93, 1)
                        BorderThickness: =2
                        DropShadow: =DropShadow.Semilight
                        Fill: =RGBA(45, 65, 93, 1)
                        Height: =Parent.Height - Self.Y * 2
                        RadiusBottomLeft: =10
                        RadiusBottomRight: =10
                        RadiusTopLeft: =10
                        RadiusTopRight: =10
                        Width: =Parent.Width - Self.X * 2
                        Y: =10
                      Children:
                        - Gallery3_3:
                            Control: Gallery@2.15.0
                            Variant: VariableHeight
                            Properties:
                              BorderColor: =
                              Height: =Parent.Height - Self.Y
                              Items: |-
                                =SortByColumns(
                                    Filter(
                                        colLancamento,
                                        IsBlank(TextInput1_17.Selected.Value) || Text(data_viagem, "[$-pt-BR]mmm/yyyy") = TextInput1_17.Selected.Value),
                                    "data_viagem",
                                    SortOrder.Ascending)
                              ShowScrollbar: =false
                              TemplateSize: =120
                              Width: =Parent.Width
                              Y: =160
                            Children:
                              - Container34_3:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    DropShadow: =DropShadow.Semilight
                                    Height: =Parent.TemplateHeight
                                    PaddingLeft: =20
                                    PaddingRight: =20
                                    RadiusBottomLeft: =10
                                    RadiusBottomRight: =10
                                    RadiusTopLeft: =10
                                    RadiusTopRight: =10
                                    Width: =Parent.Width - 10
                                  Children:
                                    - HtmlText1_2:
                                        Control: HtmlViewer@2.1.0
                                        Properties:
                                          Fill: =RGBA(255, 255, 255, 1)
                                          Font: =Font.'Open Sans'
                                          Height: =Parent.Height
                                          HtmlText: |
                                            ="<div style='width:100%; font-family:Arial; font-size:15px; color:#2d415d; padding:5px; border-bottom:1px solid white;'>

                                              <!-- Nome -->
                                              <div style='font-size:18px; font-weight:bold; margin-bottom:2px;'>
                                                " & Concatenate(ThisItem.data_viagem, " - ", ThisItem.motivo_viagem) & "
                                              </div>

                                            <!-- Linha 1: SEI, Contratada, CNPJ Contratada, Data Assinatura -->
                                              <div style='font-size:14px; display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; margin-bottom:2px'>
                                                <div style='width:600px'><strong>Contratada:</strong> " & ThisItem.local_saida & "</div>
                                              </div>
                                            <!-- Linha 1: SEI, Contratada, CNPJ Contratada, Data Assinatura -->
                                              <div style='font-size:14px; display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; margin-bottom:2px'>
                                                <div style='width:170px'><strong>Status:</strong> " & ThisItem.local_chegada & "</div>
                                              </div>
                                            </div>"
                                          Width: =Parent.Width
                                    - Button4_1:
                                        Control: Classic/Button@2.2.0
                                        Properties:
                                          BorderColor: =ColorFade(Self.Fill, -15%)
                                          Color: =RGBA(0, 0, 0, 0)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          Fill: =RGBA(0, 0, 0, 0)
                                          Font: =Font.'Open Sans'
                                          Height: =Parent.Height
                                          HoverBorderColor: =
                                          HoverColor: =RGBA(0, 0, 0, 0)
                                          HoverFill: =
                                          OnSelect: |-
                                            =Set(varEditarViagem, true);
                                            Set(varViagemSelecionada, ThisItem);
                                            Navigate('Lançamento KM Screen');
                                          PressedBorderColor: =
                                          PressedColor: =Self.Fill
                                          PressedFill: =
                                          Text: =
                                          Width: =Parent.Width
                        - Container10_4:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              BorderColor: =RGBA(45, 65, 93, 1)
                              DropShadow: =DropShadow.None
                              Fill: =RGBA(45, 65, 93, 1)
                              Height: =50
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =10
                              LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                              PaddingBottom: =2
                              PaddingLeft: =5
                              PaddingRight: =5
                              PaddingTop: =2
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =10
                              RadiusTopRight: =10
                              Width: =Parent.Width
                              Y: =10
                            Children:
                              - Button1_2:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Stretch
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(45, 65, 93, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    Fill: =RGBA(255, 255, 255, 1)
                                    FillPortions: =1
                                    Font: =Font.Arial
                                    Height: =35
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    LayoutMinHeight: =0
                                    OnSelect: |-
                                      =Set(varEditarViagem, false);
                                      Navigate('Lançamento KM Screen')
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =12
                                    Text: ="NOVO LANÇAMENTO"
                                    X: =4
                                    Y: =35
                        - Container10_3:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              BorderColor: =RGBA(45, 65, 93, 1)
                              DropShadow: =DropShadow.None
                              Fill: =RGBA(45, 65, 93, 1)
                              Height: =80
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =10
                              LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                              PaddingLeft: =5
                              PaddingRight: =5
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =10
                              RadiusTopRight: =10
                              Width: =Parent.Width
                              Y: =70
                            Children:
                              - Container5_11:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    DropShadow: =DropShadow.None
                                    Fill: =RGBA(255, 255, 255, 1)
                                    Height: =80
                                    LayoutDirection: =LayoutDirection.Vertical
                                    LayoutMinHeight: =0
                                    PaddingBottom: =5
                                    PaddingLeft: =5
                                    PaddingRight: =5
                                    RadiusBottomLeft: =10
                                    RadiusBottomRight: =10
                                    RadiusTopLeft: =10
                                    RadiusTopRight: =10
                                    Width: =260
                                  Children:
                                    - Label1_41:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          AlignInContainer: =AlignInContainer.Stretch
                                          BorderColor: =RGBA(0, 18, 107, 1)
                                          Color: =RGBA(45, 65, 93, 1)
                                          FillPortions: =1
                                          Font: =Font.Arial
                                          FontWeight: =FontWeight.Semibold
                                          LayoutMinHeight: =0
                                          LayoutMinWidth: =0
                                          Size: =13
                                          Text: |-
                                            ="📓 FILTRAR MÊS "
                                          Width: =100
                                    - TextInput1_17:
                                        Control: Classic/ComboBox@2.4.0
                                        Properties:
                                          AlignInContainer: =AlignInContainer.Stretch
                                          BorderColor: =RGBA(45, 65, 93, 1)
                                          ChevronBackground: =RGBA(45, 65, 93, 1)
                                          ChevronDisabledBackground: =RGBA(255, 255, 255, 1)
                                          ChevronFill: =RGBA(255, 255, 255, 1)
                                          ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                          ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                          Color: =RGBA(255, 255, 255, 1)
                                          DisabledBorderColor: =RGBA(255, 255, 255, 1)
                                          DisabledColor: =RGBA(255, 255, 255, 1)
                                          DisplayFields: =["Value"]
                                          Fill: =RGBA(45, 65, 93, 1)
                                          FillPortions: =1
                                          Font: =Font.Arial
                                          FontWeight: =FontWeight.Semibold
                                          Height: =Parent.Height
                                          HoverColor: =RGBA(255, 255, 255, 1)
                                          HoverFill: =RGBA(45, 65, 93, 1)
                                          InputTextPlaceholder: =
                                          Items: =colMesAno
                                          LayoutMinHeight: =0
                                          LayoutMinWidth: =0
                                          OnChange: =
                                          OnSelect: =
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 18, 107, 1)
                                          SearchFields: =["Value"]
                                          SelectMultiple: =false
                                          SelectionColor: =RGBA(255, 255, 255, 1)
                                          SelectionFill: =RGBA(45, 65, 93, 1)
                                          Size: =12
                                          Width: =Parent.Width
