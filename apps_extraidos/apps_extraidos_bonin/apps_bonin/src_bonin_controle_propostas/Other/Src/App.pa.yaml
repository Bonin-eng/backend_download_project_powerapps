# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
App:
  Properties:
    OnStart: |+
      =Set(loc_PropostaPrivada, false);
      ClearCollect(
              colTelas,
                  Table(
                      {NomeTela: "Propostas", Tela: 'Propostas PÃºblicas Screen', Icon: Icon.Home}
      ));

      ClearCollect(Col_Propostas_Publicas,
      Filter(Proposta, Item_Preferencia.Value = "Sim", StartsWith(idProposta, "P.0")));

      ClearCollect(Col_Propostas_Privadas,
      Filter(Proposta, Item_Preferencia.Value = "Sim", StartsWith(idProposta, "P.1")));

      ClearCollect(colPropostas, Col_Propostas_Publicas);

      ClearCollect(
          ColLoteRecentes,
          ForAll(
              GroupBy(
                  Historico_Propostas,
                  IdPropostaLote,
                  GrupoPropostas
              ),
              First(
                  SortByColumns(GrupoPropostas, "Data", SortOrder.Descending)
              )
          )
      );

      ClearCollect(
          ColTeste,
          First(
              SortByColumns(Historico_Propostas,
                  "Data",
                  SortOrder.Descending
              )
          )
      );

    Theme: =PowerAppsTheme
