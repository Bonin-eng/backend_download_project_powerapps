# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  TI_3:
    Properties:
      Fill: =EsquemaDeCores.AzulBackground.Cor
      LoadingSpinnerColor: =RGBA(45, 65, 93, 1)
      OnVisible: |-
        =// Carrega todas as opções de empresa
        ClearCollect(
            colEmpresaFiltroSolicitanteTI,
            Filter(
                SortByColumns(
                    Distinct(
                        db_tickets_infra,
                        Tk_Empresa_Solicitante
                    ),
                    "Value",
                    SortOrder.Ascending
                ),
                !IsBlank(Value)
            )
        );
        // Carrega todas as opções de chamados
        ClearCollect(
            ColChamadosTI,
            SortByColumns(
                Distinct(
                    db_tickets_infra,
                    Tk_Tipo_Ticket
                ),
                "Value",
                SortOrder.Ascending
            )
        );
        // Carrega todas as opções do campo Choice e resolve o Nome no M365 uma única vez
        ClearCollect(
            colAtendentesTI,
            SortByColumns(
                AddColumns(
                    Choices(db_tickets_infra.Tk_Atendente),
                    Atendente,
                    UsuáriosdoOffice365.UserProfileV2(Value).displayName
                ),
                "Atendente",
                SortOrder.Ascending
            )
        )
    Children:
      - sigd_ctn_geral_27:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            Fill: =EsquemaDeCores.AzulConteiner.Cor
            Height: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Height
            RadiusBottomLeft: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Raio
            RadiusBottomRight: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Raio
            RadiusTopLeft: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Raio
            RadiusTopRight: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Raio
            Width: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Width
            X: =sigd_bonin_cabecalho_27.ReferênciaContêiner.X
            Y: =sigd_bonin_cabecalho_27.ReferênciaContêiner.Y
          Children:
            - Container29_2:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  BorderStyle: =BorderStyle.None
                  DropShadow: =DropShadow.None
                  Height: =Parent.Height
                  LayoutDirection: =LayoutDirection.Vertical
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                  Width: =Parent.Width
                Children:
                  - Container33_4:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =50
                        RadiusBottomLeft: =Medidas.Raio
                        RadiusBottomRight: =Medidas.Raio
                        RadiusTopLeft: =Medidas.Raio
                        RadiusTopRight: =Medidas.Raio
                        Visible: =!info_chamados
                      Children:
                        - sigd_ctn_geral_RH_1_7:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              BorderStyle: =BorderStyle.None
                              DropShadow: =DropShadow.None
                              Height: =30
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =Medidas.Espacamento*2
                              PaddingLeft: =10
                              PaddingRight: =10
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Width: =Parent.Width - Self.X * 2
                              Y: =10
                            Children:
                              - TextInput1_36:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderStyle: =BorderStyle.None
                                    BorderThickness: =0
                                    Clear: =true
                                    Default: =
                                    FillPortions: =1
                                    Height: =30
                                    HintText: |-
                                      ="🔎 Digite o nome do solicitante para filtrar"
                                    LayoutMinWidth: =100
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    Size: =11
                                    X: =40
                              - Container23_12:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Center
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    Height: =sigd_ctn_geral_RH_1_7.Height
                                    LayoutMinWidth: =100
                                    RadiusBottomLeft: =5
                                    RadiusBottomRight: =5
                                    RadiusTopLeft: =5
                                    RadiusTopRight: =5
                                  Children:
                                    - cmb_RH_1_3_10:
                                        Control: Classic/ComboBox@2.4.0
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =0
                                          DisplayFields: =["Atendente"]
                                          FocusedBorderThickness: =1
                                          Height: =Parent.Height
                                          InputTextPlaceholder: |
                                            ="Selecione o atendente"
                                          Items: =colAtendentesTI
                                          SearchFields: =["Atendente"]
                                          SelectMultiple: =false
                                          Size: =11
                                          Width: =Parent.Width
                              - Container23_9:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Center
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    Height: =sigd_ctn_geral_RH_1_7.Height
                                    LayoutMinWidth: =100
                                    RadiusBottomLeft: =5
                                    RadiusBottomRight: =5
                                    RadiusTopLeft: =5
                                    RadiusTopRight: =5
                                  Children:
                                    - cmb_RH_1_3_8:
                                        Control: Classic/ComboBox@2.4.0
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =
                                          BorderThickness: =0
                                          DisplayFields: =["Value"]
                                          FocusedBorderThickness: =1
                                          Height: =Parent.Height
                                          InputTextPlaceholder: ="Selecione a empresa"
                                          Items: =colEmpresaFiltroSolicitanteTI
                                          SearchFields: =["Value"]
                                          SelectMultiple: =false
                                          Size: =11
                                          Width: =Parent.Width
                              - Container23_10:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Center
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    Height: =sigd_ctn_geral_RH_1_7.Height
                                    LayoutMinWidth: =100
                                    RadiusBottomLeft: =5
                                    RadiusBottomRight: =5
                                    RadiusTopLeft: =5
                                    RadiusTopRight: =5
                                  Children:
                                    - cmb_RH_1_3_9:
                                        Control: Classic/ComboBox@2.4.0
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =0
                                          DisplayFields: =["Value"]
                                          FocusedBorderThickness: =1
                                          Height: =Parent.Height
                                          InputTextPlaceholder: |
                                            ="Selecione o tipo de requisição"
                                          Items: =ColChamadosTI
                                          SearchFields: =["Value"]
                                          SelectMultiple: =false
                                          Size: =11
                                          Width: =Parent.Width
                              - Container23_11:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Center
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =2
                                    Height: =sigd_ctn_geral_RH_1_7.Height
                                    LayoutMinWidth: =100
                                    RadiusBottomLeft: =5
                                    RadiusBottomRight: =5
                                    RadiusTopLeft: =5
                                    RadiusTopRight: =5
                                  Children:
                                    - HtmlText13_1:
                                        Control: HtmlViewer@2.1.0
                                        Properties:
                                          AutoHeight: =true
                                          Height: =Parent.Height
                                          HtmlText: |
                                            =With(
                                              {
                                                // Base sem a coluna complexa (se precisar)
                                                _baseDs: DropColumns(db_tickets_infra, 'Criado por')},

                                                // Filtros comuns (empresa, tipo, atendente)
                                                With({
                                                _base:
                                                  Filter(
                                                    _baseDs,
                                                    (IsBlank(cmb_RH_1_3_8.Selected.Value)  || Tk_Empresa_Solicitante = cmb_RH_1_3_8.Selected.Value),
                                                    (IsBlank(cmb_RH_1_3_9.Selected.Value)  || Tk_Tipo_Ticket        = cmb_RH_1_3_9.Selected.Value),
                                                    (IsBlank(cmb_RH_1_3_10.Selected.Value) || Tk_Atendente.Value    = cmb_RH_1_3_10.Selected.Value)
                                                  )},

                                                // Pesquisa por nome (uma vez só)
                                                With({
                                                _src: Search(_base, TextInput1_36.Text, Tk_Nome_Solicitante)},
                                                With({
                                                // Contadores por status  (se for Choice: use Tk_Status_Ticket.Value)
                                                _cAberto:      CountIf(_src, Tk_Status_Ticket = "Aberto"),
                                                _cIniciado:    CountIf(_src, Tk_Status_Ticket = "Iniciado"),
                                                _cAndamento:   CountIf(_src, Tk_Status_Ticket = "Em Andamento"),
                                                _cSuspensao:   CountIf(_src, Tk_Status_Ticket = "Suspensão")},
                                                With({
                                                // Tabela para renderizar as 4 colunas de forma compacta
                                                _cards: Table(
                                                  { lbl:"Aberto",        val:_cAberto      },
                                                  { lbl:"Iniciado",      val:_cIniciado    },
                                                  { lbl:"Em Andamento",  val:_cAndamento   },
                                                  { lbl:"Suspensão",     val:_cSuspensao   }
                                                )
                                              },

                                              "<div style='
                                                background:#fff;
                                                border:1px solid #e5e7eb;
                                                border-radius:5px;
                                                font-size:11px;
                                                color:#111;
                                              '>
                                                <table style='width:100%;height:" & (sigd_ctn_geral_RH_1_7.Height) & "px;border-collapse:collapse;table-layout:fixed;'>
                                                  <tr>" &
                                                    Concat(
                                                      _cards,
                                                      "<td style=""width:25%;vertical-align:middle;"">
                                                         <div style=""display:flex;align-items:center;justify-content:center;gap:6px;"">
                                                           <span style=""font-weight:600;color:#374151;"">" & lbl & "</span>
                                                           <span style=""font-size:13px;font-weight:700;"">" & Text(val) & "</span>
                                                         </div>
                                                       </td>"
                                                    ) &
                                                  "</tr>
                                                </table>
                                              </div>"
                                            )))))
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Width: =Parent.Width
                  - Container35_2:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                      Children:
                        - galPortKanban_4:
                            Control: Gallery@2.15.0
                            Variant: Horizontal
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Height: =Parent.Height - Self.Y * 2
                              Items: =db_tipo_evento
                              TemplateFill: =Color.Transparent
                              TemplateSize: "=If(\r\n    CountRows(Self.AllItems) = 0,\r\n    0, // Valor padrão ou substituto para evitar divisão por zero\r\n    Parent.Width / CountRows(Self.AllItems) - 6\r\n    \r\n)"
                              Width: =Parent.Width - Self.X * 2
                            Children:
                              - galPortK_Projetos_3:
                                  Control: Gallery@2.15.0
                                  Variant: VariableHeight
                                  Properties:
                                    Height: =Parent.Height - Self.Y - 10
                                    Items: |+
                                      =Search(
                                          Filter(
                                              DropColumns(db_tickets_infra, 'Criado por'),
                                              Tk_Status_Ticket = ThisItem.Status,
                                              (IsBlank(cmb_RH_1_3_8.Selected.Value)       || Tk_Empresa_Solicitante = cmb_RH_1_3_8.Selected.Value),
                                              (IsBlank(cmb_RH_1_3_9.Selected.Value)       || Tk_Tipo_Ticket = cmb_RH_1_3_9.Selected.Value),
                                              (IsBlank(cmb_RH_1_3_10.Selected.Atendente)  || Tk_Atendente.Value = cmb_RH_1_3_10.Selected.Value)
                                          ),
                                          TextInput1_36.Text, Tk_Nome_Solicitante)

                                    ShowScrollbar: =false
                                    TemplatePadding: =0
                                    TemplateSize: =120
                                    Width: =Parent.TemplateWidth-Self.X*2
                                    Y: =HtmlText11.Y + HtmlText11.Height
                                  Children:
                                    - HtmlText9_1:
                                        Control: HtmlViewer@2.1.0
                                        Properties:
                                          AutoHeight: =true
                                          Height: =120
                                          HtmlText: |
                                            =With(
                                                {
                                                    corPrincipal: EsquemaDeCores.AzulEscuroBonin.Texto,
                                                    corSecundaria: "#ffffff",
                                                    corTexto: "#222",
                                                    corSombra: "rgba(0,0,0,0.08)",
                                                    corNeutra: "#6b7280",

                                                    tipoTicket: Upper(ThisItem.Tk_Tipo_Ticket),
                                                    empresaSolicitante: Upper(ThisItem.Tk_Empresa_Solicitante),

                                                    atendenteNome: If(
                                                        !IsBlank(ThisItem.Tk_Atendente.Value),
                                                        UsuáriosdoOffice365.UserProfileV2(ThisItem.Tk_Atendente.Value).displayName,
                                                        "Sem atendente indicado"
                                                    ),

                                                    nomeSolicitante: ThisItem.Tk_Nome_Solicitante,
                                                    emailSolicitante: ThisItem.Tk_Email_Solicitante,
                                                    dataAbertura: Text(ThisItem.Tk_Data_Abertura, "dd/mm/yyyy"),

                                                    /* === LARGURA DINÂMICA ===
                                                       total = If(EstadoMenuSaida; 293; 263.333333)
                                                       conteúdo (útil) = total - 14 (padding 7 + 7)
                                                    */
                                                    larguraTotal: Parent.Width,
                                                    larguraConteudo: Parent.Height
                                                },

                                                /* === COORDENADAS OVERLAYS (comentário) ==============================
                                                   — Y (constante nos dois estados, com este HTML):
                                                     • Avatar (40x40):         Y = HtmlCard.Y + 248
                                                     • Barra de ações (36px):  Top ≈ HtmlCard.Y + 294
                                                     • Btn Acessar (120x30):   Y = HtmlCard.Y + 297
                                                     • Btn Excluir (38x26):    Y = HtmlCard.Y + 294

                                                   — X (varia conforme a largura):
                                                     EstadoMenuSaida = true  (total 293, conteúdo 279):
                                                       • Avatar:     X = HtmlCard.X + 7
                                                       • Acessar:    X = HtmlCard.X + 7 + (279 - 120)/2  = HtmlCard.X + 100
                                                       • Excluir:    X = HtmlCard.X + 7 + (279 - 38)     = HtmlCard.X + 248

                                                     EstadoMenuSaida = false (total 263.333333, conteúdo 249.333333):
                                                       • Avatar:     X = HtmlCard.X + 7
                                                       • Acessar:    X = HtmlCard.X + 7 + (249.333333 - 120)/2  = HtmlCard.X + 71.1666665
                                                       • Excluir:    X = HtmlCard.X + 7 + (249.333333 - 38)     = HtmlCard.X + 218.333333
                                                   ================================================================== */

                                                "<div style='border:1px solid " & corPrincipal & ";border-radius:10px;box-shadow:0 2px 6px " & corSombra & ";
                                                             font-family: "& App.Theme.Font & ", Arial, sans-serif;background:" & corSecundaria & ";color:" & corTexto & ";
                                                             margin-left:3px;margin-right:3px; margin-bottom:3px; /* separa os cards */
                                                             padding:7px;
                                                             min-width:200px;
                                                             max-width:" & larguraTotal & ";
                                                             width:" & larguraTotal & ";
                                                             heigh: 100%;
                                                             display:flex;flex-direction:column;gap:6px;'>

                                                    <!-- Faixa com borda, canto esquerdo arredondado e encontro na borda direita -->
                                                    <div style='margin-top:5px; margin-left:12px;margin-right:-8px; /* encosta na borda do card */
                                                                box-shadow:0 2px 6px " & corSombra & ";
                                                                padding:6px 8px;
                                                                border-left:5px solid " & corPrincipal & ";
                                                                border-top:1px solid " & corPrincipal & ";border-bottom:1px solid " & corPrincipal & ";
                                                                border-top-left-radius:7px;border-bottom-left-radius:7px; /* só o lado esquerdo arredondado */
                                                                background:transparent;'>
                                                        <div style='font-size:13px;font-weight:700;color:" & corPrincipal & ";'>" & tipoTicket & "</div>
                                                        <div style='font-size:11px;font-weight:600;color:" & corNeutra & ";'>" & empresaSolicitante & "</div>
                                                    </div>

                                                    <div style='font-size:11px;'><strong style='color:" & corPrincipal & ";'>Solicitante:</strong> " & nomeSolicitante & "</div>
                                                    <div style='font-size:11px;'><strong style='color:" & corPrincipal & ";'>E-mail:</strong> " & emailSolicitante & "</div>

                                                    <div style='display:flex;justify-content:space-between;font-size:10.5px;'>
                                                        <div><strong style='color:" & corPrincipal & ";'>Abertura:</strong> " & dataAbertura & "</div>" &
                                                        If(
                                                            Or(ThisItem.Tk_Status_Ticket = "Cancelado", ThisItem.Tk_Status_Ticket = "Concluído") &&
                                                            !IsBlank(
                                                                First(
                                                                    SortByColumns(
                                                                        Filter(
                                                                            ShowColumns(db_eventos_infra, Tk_TicketID, Tk_Data_Termino_Evento),
                                                                            Tk_TicketID = ThisItem.Tk_Ticket,
                                                                            !IsBlank(Tk_Data_Termino_Evento)
                                                                        ),
                                                                        "Tk_Data_Termino_Evento",
                                                                        SortOrder.Descending
                                                                    )
                                                                ).Tk_Data_Termino_Evento
                                                            ),
                                                            "<div><strong style='color:" & corPrincipal & ";'>Conclusão:</strong> " &
                                                                Text(
                                                                    First(
                                                                        SortByColumns(
                                                                            Filter(
                                                                                ShowColumns(db_eventos_infra, Tk_TicketID, Tk_Data_Termino_Evento),
                                                                                Tk_TicketID = ThisItem.Tk_Ticket,
                                                                                !IsBlank(Tk_Data_Termino_Evento)
                                                                            ),
                                                                            "Tk_Data_Termino_Evento",
                                                                            SortOrder.Descending
                                                                        )
                                                                    ).Tk_Data_Termino_Evento,
                                                                    "dd/mm/yyyy"
                                                                ) & "</div>",
                                                            ""
                                                        ) &
                                                    "</div>

                                                    <div style='font-size:10.5px;'>
                                                        <strong style='color:" & corPrincipal & ";'>Tempo:</strong>
                                                        <span style='background:#CCDEEC;color:#005a9e;border-radius:4px;padding:1px 6px;font-weight:600;margin-left:3px;'>" & 
                                                            If(
                                                                Or(ThisItem.Tk_Status_Ticket = "Cancelado", ThisItem.Tk_Status_Ticket = "Concluído"),
                                                                DateDiff(
                                                                    ThisItem.Tk_Data_Abertura,
                                                                    First(
                                                                        SortByColumns(
                                                                            Filter(
                                                                                ShowColumns(db_eventos_infra, Tk_TicketID, Tk_Data_Termino_Evento),
                                                                                Tk_TicketID = ThisItem.Tk_Ticket,
                                                                                !IsBlank(Tk_Data_Termino_Evento)
                                                                            ),
                                                                            "Tk_Data_Termino_Evento",
                                                                            SortOrder.Descending
                                                                        )
                                                                    ).Tk_Data_Termino_Evento,
                                                                    TimeUnit.Days
                                                                ),
                                                                DateDiff(ThisItem.Tk_Data_Abertura, Today(), TimeUnit.Days)
                                                            ) &
                                                            If(
                                                                If(
                                                                    Or(ThisItem.Tk_Status_Ticket = "Cancelado", ThisItem.Tk_Status_Ticket = "Concluído"),
                                                                    DateDiff(
                                                                        ThisItem.Tk_Data_Abertura,
                                                                        First(
                                                                            SortByColumns(
                                                                                Filter(
                                                                                    ShowColumns(db_eventos_infra, Tk_TicketID, Tk_Data_Termino_Evento),
                                                                                    Tk_TicketID = ThisItem.Tk_Ticket,
                                                                                    !IsBlank(Tk_Data_Termino_Evento)
                                                                                ),
                                                                                "Tk_Data_Termino_Evento",
                                                                                SortOrder.Descending
                                                                            )
                                                                        ).Tk_Data_Termino_Evento,
                                                                        TimeUnit.Days
                                                                    ),
                                                                    DateDiff(ThisItem.Tk_Data_Abertura, Today(), TimeUnit.Days)
                                                                ) <= 1,
                                                                " dia",
                                                                " dias"
                                                            ) &
                                                        "</span>
                                                    </div>

                                                    <div title='" & If(ThisItem.Tk_Tipo_Ticket = "Contratações Colaboradores", If(!IsBlank(ThisItem.NC_Especificacao_Maquina), PlainText(ThisItem.NC_Especificacao_Maquina), "Sem observação") ,If(!IsBlank(ThisItem.Tk_Descricao_Ocorrencia), PlainText(ThisItem.Tk_Descricao_Ocorrencia), "Sem observação")) & "' 
                                                         style='font-size:10.5px;background:#f4f6fa;border:1px solid " & EsquemaDeCores.AzulConteiner.Texto & ";border-radius:5px;padding:4px;height:80px;overflow:hidden;line-height:1.2;'>
                                                        " & If(ThisItem.Tk_Tipo_Ticket = "Contratações Colaboradores", If(!IsBlank(ThisItem.NC_Especificacao_Maquina), Substitute(Substitute(ThisItem.NC_Especificacao_Maquina,"<p>",""),"&#160;</p>","<p>"), "<span style=""color:#bbb;font-style:italic;"">Sem observação</span>"), If(!IsBlank(ThisItem.Tk_Descricao_Ocorrencia), Substitute(Substitute(ThisItem.Tk_Descricao_Ocorrencia,"<p>",""),"&#160;</p>","<p>"), "<span style=""color:#bbb;font-style:italic;"">Sem observação</span>")) & "
                                                    </div>

                                                    <div style='display:flex;align-items:center;gap:8px;margin-top:2px;'>
                                                        <div style='width:40px;height:40px;border-radius:50%;background:#000000;border:1px solid #ccc;'></div>
                                                        <div style='flex:1;font-size:10.5px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;'><b>" & atendenteNome & "</b></div>
                                                    </div>

                                                    <div style='position:relative; margin-top:6px;'>
                                                        <div style='text-align:center;'>
                                                            <div style='display:inline-block;background:" & corPrincipal & ";color:#fff;border-radius:6px;font-size:11px;padding:6px 12px;font-weight:700;cursor:pointer;width:120px;'>Acessar Chamado</div>
                                                        </div>
                                                        <div style='position:absolute; right:0; top:0;'>
                                                            <div style='background:#DB4437;color:#fff;border-radius:6px;font-size:22px;padding:0px 8px;cursor:pointer;'>&#128465;</div>
                                                        </div>
                                                    </div>

                                                </div>"
                                            )
                                          OnSelect: =Select(Parent)
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Width: =Parent.Width
                                    - Image1_6:
                                        Control: Image@2.2.3
                                        Properties:
                                          BorderColor: =App.Theme.Colors.Darker30
                                          Height: =40
                                          Image: |-
                                            =If(ThisItem.Tk_Atendente.Value = Blank(),
                                            'Logo - Bonin Menor',
                                            UsuáriosdoOffice365.UserPhoto(ThisItem.Tk_Atendente.Value))
                                          RadiusBottomLeft: =50
                                          RadiusBottomRight: =50
                                          RadiusTopLeft: =50
                                          RadiusTopRight: =50
                                          Width: =40
                                          X: =HtmlText9_1.X + 12
                                          Y: =HtmlText9_1.Y + HtmlText9_1.Height - Self.Height - 54
                                    - Button8:
                                        Control: Classic/Button@2.2.0
                                        Properties:
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =0
                                          Color: =
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(0, 0, 0, 0)
                                          DisabledFill: =RGBA(0, 0, 0, 0)
                                          Fill: =RGBA(0, 0, 0, 0)
                                          Height: =25
                                          HoverBorderColor: =
                                          HoverColor: =
                                          HoverFill: =
                                          OnSelect: |+
                                            =UpdateContext({
                                                info_chamados:true,
                                                AtualizacaoHistorico:false,
                                                loc_InfoTicket: LookUp(db_tickets_infra, Tk_Ticket = ThisItem.Ticket)
                                                });

                                            With(
                                                { Consulta_Tk_Tipo_Ticket_TI: loc_InfoTicket.Tk_Tipo_Ticket },
                                                With(
                                                    {
                                                        Consulta_Tipo_Requisicao:
                                                            Switch(
                                                                Consulta_Tk_Tipo_Ticket_TI,
                                                                "Contratações Colaboradores",                                       { rotulo:"REQUISIÇÃO DE CONTRATAÇÃO DE COLABORADOR",   codigo:"RCC" },
                                                                "Contratações Softwares",                                           { rotulo:"REQUISIÇÃO DE CONTRATAÇÃO DE SOFTWARE",      codigo:"RCS" },
                                                                "Impressora",                                                       { rotulo:"REQUISIÇÃO DE IMPRESSORA",                   codigo:"RIM" },
                                                                "Suporte Implementações de soluções e modificações estruturais",    { rotulo:"REQUISIÇÃO DE INTERVENÇÃO TÉCNICA",          codigo:"RIT" },
                                                                "Liberação de Acesso",                                              { rotulo:"REQUISIÇÃO DE LIBERAÇÃO DE ACESSO",          codigo:"RLA" },
                                                                "Infra (Rede/Queda/Lentidão)",                                      { rotulo:"REQUISIÇÃO DE SUPORTE A INFRA",              codigo:"RSI" },
                                                                "Suporte Final",                                                    { rotulo:"REQUISIÇÃO DE SUPORTE TÉCNICO",              codigo:"RST" }
                                                            )
                                                    },
                                                    UpdateContext({
                                                        Requisicao:      Consulta_Tipo_Requisicao.rotulo,
                                                        Tipo_Requisicao: Consulta_Tipo_Requisicao.codigo
                                                    });
                                                )
                                            )
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          PressedBorderColor: =
                                          PressedColor: =
                                          PressedFill: =
                                          RadiusBottomLeft: =5
                                          RadiusBottomRight: =5
                                          RadiusTopLeft: =5
                                          RadiusTopRight: =5
                                          Text: |-
                                            ="
                                            "
                                          Tooltip: ="Clique aqui para acessar o chamado"
                                          Width: =140
                                          X: =Parent.Width/2 - Self.Width/2
                                          Y: =HtmlText9_1.Height - Self.Height - 14
                                    - Button8_1:
                                        Control: Classic/Button@2.2.0
                                        Properties:
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =0
                                          Color: =
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(0, 0, 0, 0)
                                          DisabledFill: =RGBA(0, 0, 0, 0)
                                          Fill: =RGBA(0, 0, 0, 0)
                                          Height: =25
                                          HoverBorderColor: =
                                          HoverColor: =
                                          HoverFill: =
                                          OnSelect: |-
                                            =UpdateContext({varInfraDeletar: ThisItem});
                                            UpdateContext({VarInfraCtnDeletar: true})
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          PressedBorderColor: =
                                          PressedColor: =
                                          PressedFill: =
                                          RadiusBottomLeft: =5
                                          RadiusBottomRight: =5
                                          RadiusTopLeft: =5
                                          RadiusTopRight: =5
                                          Text: |-
                                            ="
                                            "
                                          Tooltip: ="Clique aqui para deletar"
                                          Width: =30
                                          X: =Parent.Width - Self.Width - 11
                                          Y: =HtmlText9_1.Height - Self.Height - 14
                              - HtmlText11:
                                  Control: HtmlViewer@2.1.0
                                  Properties:
                                    AutoHeight: =true
                                    HtmlText: |+
                                      =With(
                                          {
                                              corPrincipal: "white",
                                              corSecundaria: "rgba(0,0,0,0.08)",
                                              corTexto: "#222",
                                              corSombra: "rgba(0,0,0,0.08)",
                                              corNeutra: "#6b7280",

                                              tituloGaleria: Upper(ThisItem.Tipo_Evento),
                                              subtituloGaleria: ThisItem.Status
                                          },

                                          "<div style='border:1px solid " & EsquemaDeCores.AzulEscuroBonin.Texto & ";border-radius:10px;box-shadow:0 2px 6px " & corSombra & ";
                                                       font-family: "& App.Theme.Font & ", Arial, sans-serif;background:" & EsquemaDeCores.AzulBackground.Texto & ";color:" & corTexto & ";
                                                       margin:3px;padding:6px;width:100% - 6;display:flex;flex-direction:column;gap:4px;text-align: center'>

                                              <div style='font-size:14px;font-weight:700;color:" & corPrincipal & ";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;'>
                                                  " & tituloGaleria & "
                                              </div>

                                              <div style='font-size:13px;color:white;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;'>
                                                  " & subtituloGaleria & "
                                              </div>

                                          </div>"
                                      )
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Width: =Parent.TemplateWidth
                        - Container36_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              Fill: =EsquemaDeCores.AzulConteiner.Cor
                              Height: =Parent.Height
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =info_chamados
                              Width: =Parent.Width
                            Children:
                              - Container38_1:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    DropShadow: =DropShadow.None
                                    Height: =Parent.Height - Self.Y
                                    LayoutDirection: =LayoutDirection.Vertical
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Width: =Parent.Width - Medidas.Espacamento*2
                                    X: =Parent.Width/2 - Self.Width/2
                                    Y: =Medidas.Espacamento*2
                                  Children:
                                    - Container39_3:
                                        Control: GroupContainer@1.3.0
                                        Variant: ManualLayout
                                        Properties:
                                          AlignInContainer: =AlignInContainer.Center
                                          DropShadow: =DropShadow.None
                                          Fill: =EsquemaDeCores.AzulBackground.Cor
                                          FillPortions: =0
                                          Height: =50
                                          RadiusBottomLeft: =Medidas.Raio/2
                                          RadiusBottomRight: =Medidas.Raio/2
                                          RadiusTopLeft: =Medidas.Raio/2
                                          RadiusTopRight: =Medidas.Raio/2
                                          Width: =Parent.Width - Medidas.Espacamento*4
                                        Children:
                                          - Label1_136:
                                              Control: Label@2.5.1
                                              Properties:
                                                Align: =Align.Center
                                                BorderColor: =App.Theme.Colors.Darker30
                                                Color: =RGBA(255, 255, 255, 1)
                                                FontWeight: =FontWeight.Semibold
                                                Height: =Parent.Height
                                                Size: =20
                                                Text: |-
                                                  =Concatenate(Requisicao, " - TICKET: ", loc_InfoTicket.Tk_Ticket)
                                                Width: =Parent.Width
                                          - Icon1_3:
                                              Control: Classic/Icon@2.5.0
                                              Properties:
                                                BorderColor: =App.Theme.Colors.Darker30
                                                Color: =RGBA(255, 255, 255, 1)
                                                Height: =Parent.Height - Self.Y * 2
                                                Icon: =Icon.CancelBadge
                                                OnSelect: |-
                                                  =UpdateContext({
                                                      info_chamados: false,
                                                      loc_InfoTicket: Blank(),
                                                      Requisicao: Blank(),
                                                      Tipo_Requisicao: Blank()
                                                      })
                                                X: =Parent.Width - Self.Width
                                                Y: =5
                                    - Container45_1:
                                        Control: GroupContainer@1.3.0
                                        Variant: ManualLayout
                                        Properties:
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =Medidas.Espacamento*2
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                    - Container39_4:
                                        Control: GroupContainer@1.3.0
                                        Variant: ManualLayout
                                        Properties:
                                          DropShadow: =DropShadow.None
                                          Height: =40
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                        Children:
                                          - Container40_1:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                BorderStyle: =BorderStyle.None
                                                DropShadow: =DropShadow.None
                                                Height: =Parent.Height
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                PaddingBottom: =10
                                                PaddingLeft: =10
                                                PaddingRight: =10
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                                Width: =Parent.Width
                                              Children:
                                                - Container41_1:
                                                    Control: GroupContainer@1.3.0
                                                    Variant: ManualLayout
                                                    Properties:
                                                      DropShadow: =DropShadow.None
                                                      RadiusBottomLeft: =0
                                                      RadiusBottomRight: =0
                                                      RadiusTopLeft: =0
                                                      RadiusTopRight: =0
                                                      Width: =981
                                                    Children:
                                                      - Container44_1:
                                                          Control: GroupContainer@1.3.0
                                                          Variant: AutoLayout
                                                          Properties:
                                                            DropShadow: =DropShadow.None
                                                            Fill: =RGBA(255, 255, 255, 1)
                                                            Height: =Parent.Height
                                                            LayoutDirection: =LayoutDirection.Vertical
                                                            RadiusBottomLeft: =10
                                                            RadiusBottomRight: =10
                                                            RadiusTopLeft: =Medidas.Raio
                                                            RadiusTopRight: =10
                                                            Width: =Parent.Width
                                                            Y: |+
                                                              =0
                                                          Children:
                                                            - HtmlText12:
                                                                Control: HtmlViewer@2.1.0
                                                                Properties:
                                                                  FillPortions: =1
                                                                  Height: =Parent.Height
                                                                  HtmlText: |
                                                                    =With(
                                                                        { req: loc_InfoTicket },
                                                                        With(
                                                                            {
                                                                                // ------------------ Campos comuns ------------------
                                                                                reqName:      req.Tk_Nome_Solicitante,
                                                                                reqEmail:     req.Tk_Email_Solicitante,
                                                                                reqCompany:   req.Tk_Empresa_Solicitante,
                                                                                reqOpenedAt:  Text(req.Tk_Data_Abertura, "[$-pt-BR]dd/mm/yyyy"),

                                                                                // Anexos – PLUGUE aqui a fonte que funcionou pra você (controle de anexos ou LookUp na lista)
                                                                                // Ex.: attTicket.Attachments  OU  LookUp(SuaLista; ID = req.ID).' {Attachments}'
                                                                                reqAttachments: loc_InfoTicket.Anexos,

                                                                                // ------------------ rcc ------------------
                                                                                rccNome:       req.NC_Nome,
                                                                                rccData:       Text(req.NC_Data_Entrada_Colaborador, "[$-pt-BR]dd/mm/yyyy"),
                                                                                rccFuncao:     req.NC_Funcao,
                                                                                rccSetor:      req.NC_Setor,
                                                                                rccSup:        req.'NC_Gerente/Coordenador',
                                                                                rccDescHtml:   req.NC_Especificacao_Maquina,

                                                                                // ------------------ rcs ------------------
                                                                                rcsSoftware:   req.CS_Nome_Software,
                                                                                rcsLink:       req.CS_Link_Contratacao,   // URL
                                                                                rcsTempo:      req.CS_Tempo_Uso,
                                                                                rcsDescHtml:   req.Tk_Descricao_Ocorrencia,

                                                                                // ------------------ rim ------------------
                                                                                rimResumo:     req.IP_Resumo_Problema,
                                                                                rimDescHtml:   req.Tk_Descricao_Ocorrencia,

                                                                                // ------------------ rit ------------------
                                                                                ritDescHtml:   req.Tk_Descricao_Ocorrencia,

                                                                                // ------------------ rla ------------------
                                                                                rlaEmail:      req.La_Email_Colaborador,
                                                                                rlaCanal:      req.La_Canal,
                                                                                rlaDescHtml:   req.Tk_Descricao_Ocorrencia,

                                                                                // ------------------ rsi ------------------
                                                                                rsiResumo:     req.IF_Resumo_Problema,
                                                                                rsiDescHtml:   req.Tk_Descricao_Ocorrencia,

                                                                                // ------------------ rst ------------------
                                                                                rstResumo:     req.SP_Resumo_Problema,
                                                                                rstDescHtml:   req.Tk_Descricao_Ocorrencia,

                                                                                // Tipo atual do ticket (texto que aparece em t)
                                                                                curTypeKey:  req.Tipo_Ticket
                                                                            },
                                                                            With(
                                                                                {
                                                                                    hasTopRow: Or(!IsBlank(reqName), !IsBlank(reqEmail), !IsBlank(reqCompany)),

                                                                                    // Tabela de perguntas com o campo t (tipo)
                                                                                    questions: Table(
                                                                                        // rcc
                                                                                        { t:"Contratações Colaboradores",                                     k:"Nome do novo colaborador:",         v: rccNome                         },
                                                                                        { t:"Contratações Colaboradores",                                     k:"Data de início do colaborador:",    v: rccData                         },
                                                                                        { t:"Contratações Colaboradores",                                     k:"Função:",                           v: rccFuncao                       },
                                                                                        { t:"Contratações Colaboradores",                                     k:"Setor:",                            v: rccSetor                        },
                                                                                        { t:"Contratações Colaboradores",                                     k:"Coordenador | Gerente:",            v: rccSup                          },
                                                                                        { t:"Contratações Colaboradores",                                     k:"Descrição da requisição:",          v: rccDescHtml,  fmt:"htmlSection" },

                                                                                        // rcs
                                                                                        { t:"Contratações Softwares",                                         k:"Nome do Software:",                  v: rcsSoftware                     },
                                                                                        { t:"Contratações Softwares",                                         k:"Link para contratação:",             v: rcsLink,      fmt:"url"         },
                                                                                        { t:"Contratações Softwares",                                         k:"Tempo de uso:",                      v: rcsTempo.Value                  },
                                                                                        { t:"Contratações Softwares",                                         k:"Motivo da contratação:",             v: rcsDescHtml,  fmt:"htmlSection" },

                                                                                        // rim
                                                                                        { t:"Impressora",                                                     k:"Tipo de problema:",                  v: rimResumo.Value                 },
                                                                                        { t:"Impressora",                                                     k:"Descrição da requisição:",           v: rimDescHtml,  fmt:"htmlSection" },

                                                                                        // rit
                                                                                        { t:"Suporte Implementações de soluções e modificações estruturais",  k:"Descrição da requisição:",           v: ritDescHtml,  fmt:"htmlSection" },

                                                                                        // rla
                                                                                        { t:"Liberação de Acesso",                                            k:"E-mail para liberação de acesso:",   v: rlaEmail                        },
                                                                                        { t:"Liberação de Acesso",                                            k:"Canal:",                             v: rlaCanal                        },
                                                                                        { t:"Liberação de Acesso",                                            k:"Motivo da liberação:",               v: rlaDescHtml, fmt:"htmlSection"  },

                                                                                        // rsi
                                                                                        { t:"Infra (Rede/Queda/Lentidão)",                                    k:"Tipo de problema:",                  v: rsiResumo.Value                 },
                                                                                        { t:"Infra (Rede/Queda/Lentidão)",                                    k:"Descrição da requisição:",           v: rsiDescHtml, fmt:"htmlSection"  },

                                                                                        // rst
                                                                                        { t:"Suporte Final",                                                  k:"Tipo de problema:",                  v: rstResumo.Value                 },
                                                                                        { t:"Suporte Final",                                                  k:"Descrição da requisição:",           v: rstDescHtml, fmt:"htmlSection"  }
                                                                                    )
                                                                                },

                                                                                // --------- Cartão (layout idêntico ao seu modelo) ---------
                                                                                "<div style='height:" & Self.Height-1 & "px; overflow-y:auto; overflow-x:hidden; box-sizing:border-box;'>" &
                                                                                "<div style='height: 93%;background:#fff;padding:15px 15px;
                                                                                            font-family:Segoe UI, Arial, sans-serif;color:#1a202c;margin-bottom: " & Medidas.Espacamento & "px;'>" &

                                                                                    // Cabeçalho
                                                                                    "<table style='width:100%;border-collapse:collapse;margin-bottom:8px;'><tr>" &
                                                                                        "<td style='font-weight:700;font-size:16px;'>Detalhes para atendimento</td>" &
                                                                                        "<td style='padding:0px 0;'>" &
                                                                                            If(
                                                                                                !IsBlank(reqOpenedAt),
                                                                                                "<div style='text-align:right;'>" &
                                                                                                    "<div style='font-size:14px;color:#6b7280;font-weight:600;'>Chamado aberto em</div>" &
                                                                                                    "<div style='font-size:14px;color:#374151;'>" & PlainText(reqOpenedAt) & "</div>" &
                                                                                                "</div>",
                                                                                                ""
                                                                                            ) &
                                                                                        "</td>" &
                                                                                    "</tr></table>" &

                                                                                    "<div style='height:1px;background:#f0f2f6;margin:8px 0;'></div>" &

                                                                                    // Topo: 3 colunas
                                                                                    If(
                                                                                        hasTopRow,
                                                                                        "<table style='width:100%;border-collapse:collapse;margin-bottom:6px;'><tr>" &
                                                                                            "<td style='width:33.33%;vertical-align:top;padding:6px 8px;'>" &
                                                                                                "<div style='font-weight:600;color:#4a5568;margin-bottom:2px'>Solicitante</div>" &
                                                                                                "<div style='color:#111827;'>" &
                                                                                                    Substitute( PlainText(Coalesce(reqName, "")), Char(10), "<br>" ) &
                                                                                                "</div>" &
                                                                                            "</td>" &
                                                                                            "<td style='width:33.33%;vertical-align:top;padding:6px 8px;'>" &
                                                                                                "<div style='font-weight:600;color:#4a5568;margin-bottom:2px'>E-mail</div>" &
                                                                                                "<div style='color:#111827;'>" &
                                                                                                    If(
                                                                                                        !IsBlank(reqEmail),
                                                                                                        "<a href='mailto:" & PlainText(reqEmail) & "' style='text-decoration:none;border-bottom:1px dotted #9ca3af;'>" &
                                                                                                            PlainText(reqEmail) & "</a>",
                                                                                                        ""
                                                                                                    ) &
                                                                                                "</div>" &
                                                                                            "</td>" &
                                                                                            "<td style='width:33.33%;vertical-align:top;padding:6px 8px;'>" &
                                                                                                "<div style='font-weight:600;color:#4a5568;margin-bottom:2px'>Empresa</div>" &
                                                                                                "<div style='color:#111827;'>" &
                                                                                                    Substitute( PlainText(Coalesce(reqCompany, "")), Char(10), "<br>" ) &
                                                                                                "</div>" &
                                                                                            "</td>" &
                                                                                        "</tr></table>",
                                                                                        ""
                                                                                    ) &

                                                                                    // Q&A: só do tipo atual (t)
                                                                                    "<div style='height:1px;background:#f0f2f6;margin:8px 0;'></div>" &
                                                                                    "<table style='width:100%;border-collapse:collapse;table-layout:fixed;'>" &
                                                                                        Concat(
                                                                                            Filter(
                                                                                                questions,
                                                                                                t = curTypeKey &&
                                                                                                !IsBlank(v) &&
                                                                                                (IsBlank(fmt) || fmt = "url")
                                                                                            ),
                                                                                            "<tr>" &
                                                                                                "<td style='width:33.33%;vertical-align:top;padding:6px 8px;font-weight:600;color:#4a5568;text-align:right;'>" &
                                                                                                    PlainText(k) &
                                                                                                "</td>" &
                                                                                                "<td style='vertical-align:top;padding:6px 8px;color:#111827;text-align:left;'>" &
                                                                                                    If(
                                                                                                        fmt = "url",
                                                                                                        With(
                                                                                                            { u: Trim(PlainText(Coalesce(v, ""))) },
                                                                                                            If(
                                                                                                                // Aceita http/https ou www., e exige ao menos um ponto no domínio
                                                                                                                IsMatch( u, "^(https?://|www\.)\S+\.\S+$", MatchOptions.IgnoreCase ),
                                                                                                                "<a href='" &
                                                                                                                    If( StartsWith(Lower(u), "http"), u, "https://" & u ) &
                                                                                                                    "' target='_blank' rel='noopener' " &
                                                                                                                    "style='text-decoration:none;border-bottom:1px dotted #9ca3af;'>" & PlainText(v)  & "</a>",
                                                                                                                // Se não bater com URL, mostra como texto normal
                                                                                                                Substitute( u, Char(10), "<br>" )
                                                                                                            )
                                                                                                        ),
                                                                                                        // ----- caso não seja fmt=url, segue texto normal -----
                                                                                                        Substitute( PlainText(Coalesce(v, "")), Char(10), "<br>" )
                                                                                                    ) &
                                                                                                "</td>" &
                                                                                            "</tr>"
                                                                                        ) &
                                                                                    "</table>" &

                                                                                    // Seções ricas: só do tipo atual (t) — sem duplicação
                                                                                    If(
                                                                                        CountRows(
                                                                                            Filter(questions, t = curTypeKey && fmt = "htmlSection" && !IsBlank(v))
                                                                                        ) > 0,
                                                                                        "<div style='height:1px;background:#f0f2f6;margin:8px 0;'></div>" &
                                                                                        Concat(
                                                                                            Filter(questions, t = curTypeKey && fmt = "htmlSection" && !IsBlank(v)),
                                                                                            "<div style='margin:6px 0 2px 0;font-weight:700;'>" & PlainText(k) & "</div>" &
                                                                                            "<div>" & v & "</div>"
                                                                                        ),
                                                                                        ""
                                                                                    ) &

                                                                                    // Anexos (se existirem)
                                                                                    If(
                                                                                        !IsBlank(reqAttachments) && CountRows(reqAttachments) > 0,
                                                                                        "<div style='height:1px;background:#f0f2f6;margin:8px 0;'></div>" &
                                                                                        "<div style='margin:6px 0 2px 0;font-weight:700;'>Anexos</div>" &
                                                                                        "<ul style='margin:0;padding-left:18px;'>" &
                                                                                            Concat(
                                                                                                reqAttachments,
                                                                                                "<li style='margin:2px 0;'>" &
                                                                                                    "<a href='" & ThisRecord.AbsoluteUri & "' target='_blank' rel='noopener' " &
                                                                                                       "style='text-decoration:none;border-bottom:1px dotted #9ca3af;'>" &
                                                                                                       PlainText(ThisRecord.DisplayName) & "</a>" &
                                                                                                "</li>"
                                                                                            ) &
                                                                                        "</ul>",
                                                                                        ""
                                                                                    ) &

                                                                                "</div>" & "</div>"
                                                                            )
                                                                        )
                                                                    )
                                                                  PaddingBottom: =0
                                                                  PaddingLeft: =0
                                                                  PaddingRight: =0
                                                                  PaddingTop: =0
                                                                  Width: =Parent.Width
                                                            - Container39_5:
                                                                Control: GroupContainer@1.3.0
                                                                Variant: ManualLayout
                                                                Properties:
                                                                  AlignInContainer: =AlignInContainer.Center
                                                                  DropShadow: =DropShadow.None
                                                                  Fill: =EsquemaDeCores.AzulBackground.Cor
                                                                  FillPortions: =0
                                                                  Height: =40
                                                                  RadiusBottomLeft: =Medidas.Raio
                                                                  RadiusBottomRight: =Medidas.Raio
                                                                  RadiusTopLeft: =Medidas.Raio
                                                                  RadiusTopRight: =Medidas.Raio
                                                                  Width: =Parent.Width - Medidas.Espacamento*2
                                                                Children:
                                                                  - Label1_137:
                                                                      Control: Label@2.5.1
                                                                      Properties:
                                                                        Align: =Align.Center
                                                                        BorderColor: =App.Theme.Colors.Darker30
                                                                        Color: =RGBA(255, 255, 255, 1)
                                                                        FontWeight: =FontWeight.Semibold
                                                                        Height: =Parent.Height
                                                                        PaddingBottom: =0
                                                                        PaddingLeft: =0
                                                                        PaddingRight: =0
                                                                        PaddingTop: =0
                                                                        Size: =15
                                                                        Text: ="ATENDENTE"
                                                                        Width: =Parent.Width
                                                            - Container46_1:
                                                                Control: GroupContainer@1.3.0
                                                                Variant: ManualLayout
                                                                Properties:
                                                                  BorderStyle: =BorderStyle.None
                                                                  DropShadow: =DropShadow.None
                                                                  FillPortions: =0
                                                                  Height: =100
                                                                  RadiusBottomLeft: =0
                                                                  RadiusBottomRight: =0
                                                                  RadiusTopLeft: =0
                                                                  RadiusTopRight: =0
                                                                  X: =40
                                                                Children:
                                                                  - Form_Selecao_Atendente_2:
                                                                      Control: Form@2.4.4
                                                                      Variant: Classic
                                                                      Layout: Vertical
                                                                      Properties:
                                                                        BorderColor: =App.Theme.Colors.Darker30
                                                                        DataSource: =db_tickets_infra
                                                                        DefaultMode: =FormMode.View
                                                                        Height: =Parent.Height
                                                                        Item: =loc_InfoTicket
                                                                        Width: =Parent.Width - Self.X
                                                                        X: =Image1_4.X + Image1_4.Width + Medidas.Espacamento*2
                                                                      Children:
                                                                        - Tk_Atendente_DataCard2_2:
                                                                            Control: TypedDataCard@1.0.7
                                                                            Variant: ClassicComboBoxEdit
                                                                            Properties:
                                                                              BorderColor: =App.Theme.Colors.Darker30
                                                                              DataField: ="Tk_Atendente"
                                                                              Default: =ThisItem.Tk_Atendente
                                                                              DisplayName: =DataSourceInfo([@db_tickets_infra],DataSourceInfo.DisplayName,Tk_Atendente)
                                                                              Height: =Parent.Height
                                                                              Required: =false
                                                                              Update: =DataCardValue22_2.Selected
                                                                              Width: =Parent.Width
                                                                              X: =0
                                                                              Y: =0
                                                                            Children:
                                                                              - DataCardKey22_2:
                                                                                  Control: Label@2.5.1
                                                                                  MetadataKey: FieldName
                                                                                  Properties:
                                                                                    AutoHeight: =true
                                                                                    BorderColor: =RGBA(0, 0, 0, 1)
                                                                                    Color: =App.Theme.Colors.Darker30
                                                                                    FontWeight: =FontWeight.Semibold
                                                                                    Height: =34
                                                                                    Size: =12
                                                                                    Text: =Parent.DisplayName
                                                                                    Visible: =false
                                                                                    Width: =Parent.Width
                                                                                    Wrap: =false
                                                                                    Y: =10
                                                                              - DataCardValue22_2:
                                                                                  Control: Classic/ComboBox@2.4.0
                                                                                  MetadataKey: FieldValue
                                                                                  Properties:
                                                                                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                                                                    ChevronFill: =RGBA(255, 255, 255, 1)
                                                                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                                                                    Default: =loc_InfoTicket.Tk_Atendente
                                                                                    DefaultSelectedItems: =Parent.Default
                                                                                    DisplayFields: =["Value"]
                                                                                    DisplayMode: =Parent.DisplayMode
                                                                                    Height: =30
                                                                                    HoverFill: =RGBA(186, 202, 226, 1)
                                                                                    Items: =Choices([@db_tickets_infra].Tk_Atendente)
                                                                                    OnSelect: |-
                                                                                      =Patch(
                                                                                          db_eventos_infra,
                                                                                          Defaults(db_eventos_infra),
                                                                                          {
                                                                                              Tk_TicketID: loc_InfoTicket.Tk_Ticket,
                                                                                              Tk_Data_Inicio_Evento: Today(),
                                                                                              Tk_Data_Termino_Evento: Today(),
                                                                                              Tk_Tipo_Evento: { Value: "Atendente Selecionado" } // Formato correto para campo de Opções
                                                                                          }
                                                                                      );
                                                                                    PaddingLeft: =0
                                                                                    PaddingRight: =0
                                                                                    PressedColor: =RGBA(255, 255, 255, 1)
                                                                                    SearchFields: =["Value"]
                                                                                    SelectMultiple: =false
                                                                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                                                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                                                                    Size: =11
                                                                                    Tooltip: =Parent.DisplayName
                                                                                    Width: =Parent.Width
                                                                                    Y: =Image1_4.Height/2
                                                                              - ErrorMessage22_2:
                                                                                  Control: Label@2.5.1
                                                                                  MetadataKey: ErrorMessage
                                                                                  Properties:
                                                                                    AutoHeight: =true
                                                                                    BorderColor: =RGBA(0, 0, 0, 1)
                                                                                    Color: =RGBA(168, 0, 0, 1)
                                                                                    FontWeight: =FontWeight.Semibold
                                                                                    Height: =10
                                                                                    Live: =Live.Assertive
                                                                                    PaddingBottom: =0
                                                                                    PaddingLeft: =0
                                                                                    PaddingRight: =0
                                                                                    PaddingTop: =0
                                                                                    Size: =14
                                                                                    Text: =Parent.Error
                                                                                    Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                    Width: =Parent.Width
                                                                                    Y: =DataCardValue22_2.Y + DataCardValue22_2.Height
                                                                              - StarVisible22_2:
                                                                                  Control: Label@2.5.1
                                                                                  MetadataKey: FieldRequired
                                                                                  Properties:
                                                                                    Align: =Align.Center
                                                                                    BorderColor: =RGBA(0, 0, 0, 1)
                                                                                    Color: =App.Theme.Colors.Darker30
                                                                                    Height: =DataCardKey22_2.Height
                                                                                    Text: ="*"
                                                                                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                    Width: =10
                                                                                    Wrap: =false
                                                                                    Y: =DataCardKey22_2.Y
                                                                              - Label1:
                                                                                  Control: Label@2.5.1
                                                                                  Properties:
                                                                                    FontWeight: =FontWeight.Semibold
                                                                                    Height: =30
                                                                                    PaddingLeft: =0
                                                                                    PaddingRight: =0
                                                                                    Size: =12
                                                                                    Text: =If(IsBlank(loc_InfoTicket.Tk_Atendente.Value), "Sem atendente selecionado", LookUp(colAtendentesTI, Value = loc_InfoTicket.Tk_Atendente.Value, Atendente))
                                                                                    Width: =Parent.Width
                                                                                    Y: =Image1_4.Height/2 - Self.Height
                                                                  - Image1_4:
                                                                      Control: Image@2.2.3
                                                                      Properties:
                                                                        BorderColor: =App.Theme.Colors.Darker30
                                                                        BorderThickness: =1
                                                                        Fill: =RGBA(0, 0, 0, 1)
                                                                        Height: =Parent.Height - Medidas.Espacamento*2
                                                                        Image: |-
                                                                          =If(DataCardValue22_2.Selected.Value = Blank(),
                                                                          UsuáriosdoOffice365.UserPhoto("sistemas@bonin.eng.br"),
                                                                          UsuáriosdoOffice365.UserPhoto(DataCardValue22_2.Selected.Value))
                                                                        RadiusBottomLeft: =50
                                                                        RadiusBottomRight: =50
                                                                        RadiusTopLeft: =50
                                                                        RadiusTopRight: =50
                                                                        Width: =Self.Height
                                                                        X: =Medidas.Espacamento*2
                                                                        Y: =Parent.Height/2 - Self.Height/2
                                                - Container42_1:
                                                    Control: GroupContainer@1.3.0
                                                    Variant: ManualLayout
                                                    Properties:
                                                      DropShadow: =DropShadow.None
                                                      FillPortions: =0
                                                      RadiusBottomLeft: =0
                                                      RadiusBottomRight: =0
                                                      RadiusTopLeft: =0
                                                      RadiusTopRight: =0
                                                      Width: =10
                                                - Container43_1:
                                                    Control: GroupContainer@1.3.0
                                                    Variant: AutoLayout
                                                    Properties:
                                                      DropShadow: =DropShadow.None
                                                      LayoutDirection: =LayoutDirection.Vertical
                                                      RadiusBottomLeft: =0
                                                      RadiusBottomRight: =0
                                                      RadiusTopLeft: =0
                                                      RadiusTopRight: =0
                                                    Children:
                                                      - Container37_2:
                                                          Control: GroupContainer@1.3.0
                                                          Variant: ManualLayout
                                                          Properties:
                                                            DropShadow: =DropShadow.None
                                                            FillPortions: =0
                                                            Height: =50
                                                            RadiusBottomLeft: =0
                                                            RadiusBottomRight: =0
                                                            RadiusTopLeft: =0
                                                            RadiusTopRight: =0
                                                            Visible: =If(AtualizacaoHistorico || EditarHistorico, false, true)
                                                          Children:
                                                            - Button4_2:
                                                                Control: Classic/Button@2.2.0
                                                                Properties:
                                                                  BorderColor: =ColorFade(Self.Fill, -15%)
                                                                  Color: =RGBA(255, 255, 255, 1)
                                                                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                                                  Fill: =EsquemaDeCores.AzulBackground.Cor
                                                                  Height: =Parent.Height
                                                                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                                                  HoverColor: =RGBA(255, 255, 255, 1)
                                                                  HoverFill: =ColorFade(EsquemaDeCores.AzulBackground.Cor, -20%)
                                                                  OnSelect: |-
                                                                    =UpdateContext({AtualizacaoHistorico:true});
                                                                    UpdateContext({Atendente:false});
                                                                    NewForm(Form_Lancamento_Historico_1);
                                                                  PressedBorderColor: =Self.Fill
                                                                  PressedColor: =RGBA(255, 255, 255, 1)
                                                                  PressedFill: =ColorFade(EsquemaDeCores.AzulBackground.Cor, -20%)
                                                                  RadiusTopLeft: =Medidas.Raio
                                                                  Text: ="ATUALIZAR HISTÓRICO DE EVENTOS"
                                                                  Width: =Parent.Width
                                                      - Container37_3:
                                                          Control: GroupContainer@1.3.0
                                                          Variant: ManualLayout
                                                          Properties:
                                                            DropShadow: =DropShadow.None
                                                            FillPortions: =0
                                                            Height: =Medidas.Espacamento
                                                            RadiusBottomLeft: =0
                                                            RadiusBottomRight: =0
                                                            RadiusTopLeft: =0
                                                            RadiusTopRight: =0
                                                            Visible: =If(AtualizacaoHistorico || EditarHistorico, false, true)
                                                      - Container28_9:
                                                          Control: GroupContainer@1.3.0
                                                          Variant: ManualLayout
                                                          Properties:
                                                            DropShadow: =DropShadow.None
                                                            Fill: =RGBA(255, 255, 255, 1)
                                                            Height: =150
                                                            RadiusBottomLeft: =Medidas.Raio
                                                            RadiusBottomRight: =Medidas.Raio
                                                            RadiusTopLeft: =Medidas.Raio
                                                            RadiusTopRight: =Medidas.Raio
                                                            Visible: =If(AtualizacaoHistorico || EditarHistorico, false, true)
                                                          Children:
                                                            - Container30_6:
                                                                Control: GroupContainer@1.3.0
                                                                Variant: AutoLayout
                                                                Properties:
                                                                  DropShadow: =DropShadow.None
                                                                  Height: =Parent.Height - Medidas.Espacamento*2
                                                                  LayoutDirection: =LayoutDirection.Vertical
                                                                  RadiusBottomLeft: =0
                                                                  RadiusBottomRight: =0
                                                                  RadiusTopLeft: =0
                                                                  RadiusTopRight: =0
                                                                  Width: =Parent.Width - Medidas.Espacamento*2
                                                                  X: =Parent.Width/2 - Self.Width/2
                                                                  Y: =Parent.Height/2 - Self.Height/2
                                                                Children:
                                                                  - Container32_6:
                                                                      Control: GroupContainer@1.3.0
                                                                      Variant: AutoLayout
                                                                      Properties:
                                                                        DropShadow: =DropShadow.None
                                                                        LayoutDirection: =LayoutDirection.Vertical
                                                                        RadiusBottomLeft: =0
                                                                        RadiusBottomRight: =0
                                                                        RadiusTopLeft: =0
                                                                        RadiusTopRight: =0
                                                                      Children:
                                                                        - HtmlText9:
                                                                            Control: HtmlViewer@2.1.0
                                                                            Properties:
                                                                              AlignInContainer: =AlignInContainer.Stretch
                                                                              AutoHeight: =true
                                                                              HtmlText: |+
                                                                                =With(
                                                                                    {
                                                                                        corPrincipal: EsquemaDeCores.AzulBackground.Texto,
                                                                                        corTexto: "#fff",
                                                                                        corSombra: "rgba(0,0,0,0.08)"
                                                                                    },
                                                                                    "
                                                                                        <div style='display:flex;align-items:center;justify-content:space-between;
                                                                                                border:1px solid " & corPrincipal & ";border-radius:" & Medidas.Raio & "px;
                                                                                                background:" & corPrincipal & ";
                                                                                                margin-bottom:" & Medidas.Espacamento & "px;
                                                                                                padding:4px 4px;
                                                                                                font-family: "& App.Theme.Font & ", Arial, sans-serif;
                                                                                                font-size:20px;font-weight:700;
                                                                                                color:" & corTexto & ";box-shadow:0 1px 3px " & corSombra & ";'>

                                                                                        <!-- Data -->
                                                                                        <div style='flex:1;text-align:center;'>HISTÓRICO DE EVENTOS</div>
                                                                                    </div>
                                                                                    <div style='display:flex;align-items:center;justify-content:space-between;
                                                                                                border:1px solid " & corPrincipal & ";border-radius:" & Medidas.Raio & "px;
                                                                                                background:" & corPrincipal & ";
                                                                                                margin-top:" & Medidas.Espacamento & "px;
                                                                                                margin-bottom:" & Medidas.Espacamento & "px;
                                                                                                padding:4px 4px;
                                                                                                font-family: "& App.Theme.Font & ", Arial, sans-serif;
                                                                                                font-size:16px;font-weight:700;
                                                                                                color:" & corTexto & ";box-shadow:0 1px 3px " & corSombra & ";'>

                                                                                        <!-- Data -->
                                                                                        <div style='flex:1;text-align:center;'>DATA DE<br>ABERTURA</div>

                                                                                        <!-- Nome -->
                                                                                        <div style='flex:2;text-align:center;'>TICKET</div>

                                                                                        <!-- Status -->
                                                                                        <div style='flex:3;text-align:center;'>STATUS</div>
                                                                                    </div>
                                                                                    "
                                                                                )
                                                                              PaddingBottom: =0
                                                                              PaddingLeft: =0
                                                                              PaddingRight: =0
                                                                              PaddingTop: =0
                                                                        - Gallery1_22:
                                                                            Control: Gallery@2.15.0
                                                                            Variant: VariableHeight
                                                                            Properties:
                                                                              BorderColor: =RGBA(45, 65, 93, 1)
                                                                              BorderStyle: =BorderStyle.None
                                                                              Fill: =RGBA(255, 255, 255, 1)
                                                                              FillPortions: =0
                                                                              Height: |
                                                                                =Parent.Height - Self.Y - 10
                                                                              Items: =Filter(db_eventos_infra, Tk_TicketID = loc_InfoTicket.Tk_Ticket)
                                                                              ShowScrollbar: =false
                                                                              TemplatePadding: =0
                                                                              TemplateSize: =62
                                                                              Width: =Parent.Width - Self.X*2
                                                                              X: =10
                                                                              Y: =593
                                                                            Children:
                                                                              - HtmlText8:
                                                                                  Control: HtmlViewer@2.1.0
                                                                                  Properties:
                                                                                    AutoHeight: =true
                                                                                    HtmlText: |+
                                                                                      =With(
                                                                                          {
                                                                                              corTexto: "#222",
                                                                                              corSombra: "rgba(0,0,0,0.08)"
                                                                                          },
                                                                                          "
                                                                                          <div style='display:flex;align-items:center;justify-content:space-between;
                                                                                                      height: 60px;
                                                                                                      border:1px solid #ddd;border-radius:6px;
                                                                                                      background:#fff;padding:4px 8px;
                                                                                                      font-family: "& App.Theme.Font & ", Arial, sans-serif;
                                                                                                      font-size:14px;color:" & corTexto & ";
                                                                                                      box-shadow:0 1px 3px " & corSombra & ";'>

                                                                                              <!-- Data de início -->
                                                                                              <div style='flex:1;text-align:center;white-space:nowrap;'>
                                                                                                  " & Text(ThisItem.Tk_Data_Inicio_Evento,"dd/mm/yyyy") & "
                                                                                              </div>

                                                                                              <!-- Nome do modificador -->
                                                                                              <div style='flex:2;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;'>
                                                                                                  " & ThisItem.'Modificado por'.DisplayName & "
                                                                                              </div>

                                                                                              <!-- Status -->
                                                                                              <div style='flex:3;text-align:center;font-weight:600;white-space:nowrap;'>
                                                                                                  " & ThisItem.Tk_Tipo_Evento.Value & "
                                                                                              </div>
                                                                                          </div>
                                                                                          "
                                                                                      )
                                                                                    OnSelect: =Select(Parent)
                                                                                    PaddingBottom: =0
                                                                                    PaddingLeft: =0
                                                                                    PaddingRight: =0
                                                                                    PaddingTop: =0
                                                                                    Width: =Parent.Width
                                                                              - Button3_6:
                                                                                  Control: Classic/Button@2.2.0
                                                                                  Properties:
                                                                                    BorderColor: =RGBA(255, 255, 255, 0)
                                                                                    BorderStyle: =BorderStyle.None
                                                                                    BorderThickness: =0
                                                                                    Color: =RGBA(0, 0, 0, 0)
                                                                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                                                                    Fill: =RGBA(0, 0, 0, 0)
                                                                                    Height: =HtmlText8.Height - 2
                                                                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                                                                    HoverColor: =RGBA(255, 255, 255, 1)
                                                                                    HoverFill: =ColorValue(EsquemaDeCores.AzulEscuroBonin.Texto&"33") // O 33 representa o código em hexadecimal que indica a transparência, nesse caso 20%
                                                                                    OnSelect: |
                                                                                      =UpdateContext({EditarHistorico:true});
                                                                                      Clear(colHistorioEvento);
                                                                                      ClearCollect(colHistorioEvento, Filter(db_eventos_infra, ID = ThisItem.ID));
                                                                                      UpdateContext({loc_InfoHistorioEvento: First(colHistorioEvento)});
                                                                                    PaddingBottom: =0
                                                                                    PaddingLeft: =0
                                                                                    PaddingRight: =0
                                                                                    PaddingTop: =0
                                                                                    PressedBorderColor: =Self.Fill
                                                                                    PressedColor: =Self.Fill
                                                                                    PressedFill: =Color.Transparent
                                                                                    RadiusBottomLeft: =Medidas.Raio/2
                                                                                    RadiusBottomRight: =Medidas.Raio/2
                                                                                    RadiusTopLeft: =Medidas.Raio/2
                                                                                    RadiusTopRight: =Medidas.Raio/2
                                                                                    Text: =
                                                                                    Width: =Parent.Width
                                                      - Container28_8:
                                                          Control: GroupContainer@1.3.0
                                                          Variant: ManualLayout
                                                          Properties:
                                                            DropShadow: =DropShadow.None
                                                            Fill: =RGBA(255, 255, 255, 1)
                                                            Height: =150
                                                            RadiusBottomLeft: =10
                                                            RadiusBottomRight: =10
                                                            RadiusTopLeft: =10
                                                            RadiusTopRight: =10
                                                            Visible: =If(AtualizacaoHistorico || EditarHistorico, true, false)
                                                          Children:
                                                            - Container30_5:
                                                                Control: GroupContainer@1.3.0
                                                                Variant: AutoLayout
                                                                Properties:
                                                                  DropShadow: =DropShadow.None
                                                                  Height: =Parent.Height - Self.Y - 10
                                                                  LayoutDirection: =LayoutDirection.Vertical
                                                                  RadiusBottomLeft: =0
                                                                  RadiusBottomRight: =0
                                                                  RadiusTopLeft: =0
                                                                  RadiusTopRight: =0
                                                                  Width: =Parent.Width - Self.X * 2
                                                                  X: =10
                                                                  Y: '=10 '
                                                                Children:
                                                                  - Container31_5:
                                                                      Control: GroupContainer@1.3.0
                                                                      Variant: ManualLayout
                                                                      Properties:
                                                                        BorderColor: =RGBA(0, 13, 75, 1)
                                                                        DropShadow: =DropShadow.None
                                                                        Fill: =EsquemaDeCores.AzulBackground.Cor
                                                                        FillPortions: =0
                                                                        Height: =40
                                                                        RadiusBottomLeft: =Medidas.Raio
                                                                        RadiusBottomRight: =Medidas.Raio
                                                                        RadiusTopLeft: =Medidas.Raio
                                                                        RadiusTopRight: =Medidas.Raio
                                                                      Children:
                                                                        - Label1_139:
                                                                            Control: Label@2.5.1
                                                                            Properties:
                                                                              Align: =Align.Center
                                                                              BorderColor: =App.Theme.Colors.Darker30
                                                                              Color: =RGBA(255, 255, 255, 1)
                                                                              FocusedBorderThickness: =
                                                                              FontWeight: =FontWeight.Semibold
                                                                              Height: =Parent.Height
                                                                              OnSelect: =
                                                                              Size: =15
                                                                              TabIndex: =1
                                                                              Text: ="LANÇAMENTO DE EVENTOS"
                                                                              Width: =Parent.Width - Self.X * 2
                                                                        - Icon1_4:
                                                                            Control: Classic/Icon@2.5.0
                                                                            Properties:
                                                                              BorderColor: =App.Theme.Colors.Darker30
                                                                              Color: =RGBA(255, 255, 255, 1)
                                                                              Height: =Parent.Height - Self.Y * 2
                                                                              Icon: =Icon.CancelBadge
                                                                              OnSelect: |-
                                                                                =UpdateContext({AtualizacaoHistorico: false});
                                                                                UpdateContext({EditarHistorico: false});
                                                                                ResetForm(Form_Lancamento_Historico_1);
                                                                              X: =Parent.Width - Self.Width
                                                                              Y: =5
                                                                  - Container32_5:
                                                                      Control: GroupContainer@1.3.0
                                                                      Variant: AutoLayout
                                                                      Properties:
                                                                        DropShadow: =DropShadow.None
                                                                        LayoutDirection: =LayoutDirection.Vertical
                                                                        LayoutGap: =Medidas.Espacamento
                                                                        RadiusBottomLeft: =0
                                                                        RadiusBottomRight: =0
                                                                        RadiusTopLeft: =0
                                                                        RadiusTopRight: =0
                                                                      Children:
                                                                        - Container59:
                                                                            Control: GroupContainer@1.3.0
                                                                            Variant: ManualLayout
                                                                            Properties:
                                                                              BorderStyle: =BorderStyle.None
                                                                              DropShadow: =DropShadow.None
                                                                              FillPortions: =0
                                                                              Height: =Medidas.Espacamento
                                                                              RadiusBottomLeft: =0
                                                                              RadiusBottomRight: =0
                                                                              RadiusTopLeft: =0
                                                                              RadiusTopRight: =0
                                                                        - Container54:
                                                                            Control: GroupContainer@1.3.0
                                                                            Variant: ManualLayout
                                                                            Properties:
                                                                              BorderStyle: =BorderStyle.None
                                                                              DropShadow: =DropShadow.None
                                                                              Fill: =EsquemaDeCores.AzulConteiner.Cor
                                                                              RadiusBottomLeft: =Medidas.Raio
                                                                              RadiusBottomRight: =Medidas.Raio
                                                                              RadiusTopLeft: =Medidas.Raio
                                                                              RadiusTopRight: =Medidas.Raio
                                                                            Children:
                                                                              - Form_Selecao_Atendente_3:
                                                                                  Control: Form@2.4.4
                                                                                  Variant: Classic
                                                                                  Layout: Vertical
                                                                                  Properties:
                                                                                    BorderColor: =App.Theme.Colors.Darker30
                                                                                    DataSource: =db_tickets_infra
                                                                                    DefaultMode: =FormMode.New
                                                                                    Height: =100
                                                                                    Item: =loc_InfoTicket
                                                                                    Visible: |-
                                                                                      =If(
                                                                                          !IsBlank(DataCardValue26_1.Selected.Value) && DataCardValue26_1.Selected.Value = "Atendente Selecionado",
                                                                                          true,
                                                                                          false
                                                                                      )
                                                                                    Width: =Parent.Width
                                                                                    Y: =Parent.Height - Self.Height
                                                                                  Children:
                                                                                    - Tk_Atendente_DataCard2_3:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicComboBoxEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Tk_Atendente"
                                                                                          Default: =ThisItem.Tk_Atendente
                                                                                          DisplayName: =DataSourceInfo([@db_tickets_infra],DataSourceInfo.DisplayName,Tk_Atendente)
                                                                                          Fill: =RGBA(255, 255, 255, 0)
                                                                                          Height: =Parent.Height
                                                                                          Required: =false
                                                                                          Update: =DropColumns(DataCardValue22_3.Selected, Atendente)
                                                                                          Width: =Parent.Width
                                                                                          WidthFit: =true
                                                                                          X: =0
                                                                                          Y: =0
                                                                                        Children:
                                                                                          - DataCardKey22_3:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: ="SELECIONAR ATENDENTE"
                                                                                                Width: =Parent.Width - 20
                                                                                                Wrap: =false
                                                                                                X: =10
                                                                                                Y: =10
                                                                                          - Container58:
                                                                                              Control: GroupContainer@1.3.0
                                                                                              Variant: ManualLayout
                                                                                              Properties:
                                                                                                BorderStyle: =BorderStyle.None
                                                                                                DropShadow: =DropShadow.None
                                                                                                Height: =30
                                                                                                RadiusBottomLeft: =5
                                                                                                RadiusBottomRight: =5
                                                                                                RadiusTopLeft: =5
                                                                                                RadiusTopRight: =5
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =Parent.Width/2 - Self.Width/2
                                                                                                Y: =48
                                                                                              Children:
                                                                                                - DataCardValue22_3:
                                                                                                    Control: Classic/ComboBox@2.4.0
                                                                                                    Properties:
                                                                                                      BorderColor: =If(IsBlank(Tk_Atendente_DataCard2_3.Error), Parent.BorderColor, Color.Red)
                                                                                                      BorderStyle: =BorderStyle.None
                                                                                                      BorderThickness: =0
                                                                                                      ChevronFill: =RGBA(255, 255, 255, 1)
                                                                                                      ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                                                                                      DefaultSelectedItems: =Tk_Atendente_DataCard2_3.Default
                                                                                                      DisplayFields: =["Atendente"]
                                                                                                      DisplayMode: =Parent.DisplayMode
                                                                                                      FocusedBorderThickness: =1
                                                                                                      Height: =Parent.Height
                                                                                                      HoverFill: =ColorFade(EsquemaDeCores.AzulEscuroBonin.Cor, 25%)
                                                                                                      InputTextPlaceholder: ="Selecione o atendente"
                                                                                                      Items: =colAtendentesTI
                                                                                                      PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                                                                                      PressedColor: =RGBA(255, 255, 255, 1)
                                                                                                      SearchFields: =["Atendente"]
                                                                                                      SelectMultiple: =false
                                                                                                      SelectionColor: =RGBA(255, 255, 255, 1)
                                                                                                      SelectionFill: =ColorFade(EsquemaDeCores.AzulEscuroBonin.Cor, 25%)
                                                                                                      Size: =11
                                                                                                      Tooltip: =Tk_Atendente_DataCard2_3.DisplayName
                                                                                                      Width: =Parent.Width
                                                                                          - ErrorMessage22_3:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: =Parent.Width - 60
                                                                                                X: =30
                                                                                                Y: =DataCardValue22_3.Y + DataCardValue22_3.Height
                                                                                          - StarVisible22_3:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey22_3.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =30
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey22_3.Y
                                                                              - Form_Lancamento_Historico_1:
                                                                                  Control: Form@2.4.4
                                                                                  Variant: Classic
                                                                                  Layout: Vertical
                                                                                  Properties:
                                                                                    BorderColor: =App.Theme.Colors.Darker30
                                                                                    DataSource: =db_eventos_infra
                                                                                    Fill: =RGBA(255, 255, 255, 0)
                                                                                    Height: =Parent.Height - If(Form_Selecao_Atendente_3.Visible, Form_Selecao_Atendente_3.Height, 0)
                                                                                    Item: =loc_InfoHistorioEvento
                                                                                    OnReset: =true
                                                                                    OnSuccess: |
                                                                                      =ResetForm(Form_Lancamento_Historico_1);
                                                                                    SnapToColumns: =false
                                                                                    Width: =Parent.Width
                                                                                  Children:
                                                                                    - Tk_Tipo_Evento_DataCard1_1:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicComboBoxEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Tk_Tipo_Evento"
                                                                                          Default: =ThisItem.Tk_Tipo_Evento
                                                                                          DisplayName: =DataSourceInfo([@db_eventos_infra],DataSourceInfo.DisplayName,Tk_Tipo_Evento)
                                                                                          Required: =false
                                                                                          Update: =DataCardValue26_1.Selected
                                                                                          Width: =Parent.Width/3
                                                                                          X: =0
                                                                                          Y: =1
                                                                                        Children:
                                                                                          - DataCardKey26_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: ="TIPO EVENTO"
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                Wrap: =false
                                                                                                X: =10
                                                                                                Y: =10
                                                                                          - Container55:
                                                                                              Control: GroupContainer@1.3.0
                                                                                              Variant: ManualLayout
                                                                                              Properties:
                                                                                                BorderStyle: =BorderStyle.None
                                                                                                DropShadow: =DropShadow.None
                                                                                                Height: =30
                                                                                                RadiusBottomLeft: =5
                                                                                                RadiusBottomRight: =5
                                                                                                RadiusTopLeft: =5
                                                                                                RadiusTopRight: =5
                                                                                                Width: =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardKey26_1.Y + DataCardKey26_1.Height + 5
                                                                                              Children:
                                                                                                - DataCardValue26_1:
                                                                                                    Control: Classic/ComboBox@2.4.0
                                                                                                    Properties:
                                                                                                      BorderColor: =If(IsBlank(Tk_Tipo_Evento_DataCard1_1.Error), Parent.BorderColor, Color.Red)
                                                                                                      BorderStyle: =BorderStyle.None
                                                                                                      BorderThickness: =0
                                                                                                      ChevronFill: =RGBA(255, 255, 255, 1)
                                                                                                      ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                                                                                      DefaultSelectedItems: =Tk_Tipo_Evento_DataCard1_1.Default
                                                                                                      DisplayFields: =["Value"]
                                                                                                      DisplayMode: =Parent.DisplayMode
                                                                                                      FocusedBorderThickness: =1
                                                                                                      Height: =Parent.Height
                                                                                                      HoverFill: =ColorFade(EsquemaDeCores.AzulEscuroBonin.Cor, 25%)
                                                                                                      InputTextPlaceholder: ="Selecione o evento"
                                                                                                      Items: =Choices([@db_eventos_infra].Tk_Tipo_Evento)
                                                                                                      PaddingBottom: =0
                                                                                                      PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                                                                                      PaddingTop: =0
                                                                                                      PressedColor: =RGBA(255, 255, 255, 1)
                                                                                                      SearchFields: =["Value"]
                                                                                                      SelectMultiple: =false
                                                                                                      SelectionColor: =RGBA(255, 255, 255, 1)
                                                                                                      SelectionFill: =ColorFade(EsquemaDeCores.AzulEscuroBonin.Cor, 25%)
                                                                                                      Size: =11
                                                                                                      Tooltip: =Tk_Tipo_Evento_DataCard1_1.DisplayName
                                                                                                      Width: =Parent.Width
                                                                                          - ErrorMessage26_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardValue26_1.Y + DataCardValue26_1.Height
                                                                                          - StarVisible26_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey26_1.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =10
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey26_1.Y
                                                                                    - Tk_Data_Inicio_Evento_DataCard1_1:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicDateEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Tk_Data_Inicio_Evento"
                                                                                          Default: =ThisItem.Tk_Data_Inicio_Evento
                                                                                          DisplayName: =DataSourceInfo([@db_eventos_infra],DataSourceInfo.DisplayName,Tk_Data_Inicio_Evento)
                                                                                          Required: =false
                                                                                          Update: =DataCardValue27_1.SelectedDate
                                                                                          Width: =Parent.Width/3
                                                                                          X: =0
                                                                                          Y: =1
                                                                                        Children:
                                                                                          - DataCardKey27_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: ="DATA INÍCIO"
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                Wrap: =false
                                                                                                X: =10
                                                                                                Y: =10
                                                                                          - Container56:
                                                                                              Control: GroupContainer@1.3.0
                                                                                              Variant: ManualLayout
                                                                                              Properties:
                                                                                                BorderStyle: =BorderStyle.None
                                                                                                DropShadow: =DropShadow.None
                                                                                                Height: =30
                                                                                                RadiusBottomLeft: =5
                                                                                                RadiusBottomRight: =5
                                                                                                RadiusTopLeft: =5
                                                                                                RadiusTopRight: =5
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardKey27_1.Y + DataCardKey27_1.Height + 5
                                                                                              Children:
                                                                                                - DataCardValue27_1:
                                                                                                    Control: Classic/DatePicker@2.6.0
                                                                                                    Properties:
                                                                                                      BorderColor: =If(IsBlank(Tk_Data_Inicio_Evento_DataCard1_1.Error), Parent.BorderColor, Color.Red)
                                                                                                      BorderStyle: =BorderStyle.None
                                                                                                      BorderThickness: =0
                                                                                                      DefaultDate: =If(DataCardValue26_1.Selected.Value = "Atendente Selecionado", Today(), Tk_Data_Inicio_Evento_DataCard1_1.Default)
                                                                                                      DisplayMode: =Parent.DisplayMode
                                                                                                      EndYear: =Year(Today())+100
                                                                                                      FocusedBorderThickness: =1
                                                                                                      Height: =Parent.Height
                                                                                                      IconFill: =RGBA(255, 255, 255, 1)
                                                                                                      IsEditable: =true
                                                                                                      PaddingBottom: =0
                                                                                                      PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                                                                                      Size: =11
                                                                                                      StartYear: =1899
                                                                                                      Tooltip: =Tk_Data_Inicio_Evento_DataCard1_1.DisplayName
                                                                                                      Width: =Parent.Width
                                                                                          - ErrorMessage27_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardValue27_1.Y + DataCardValue27_1.Height
                                                                                          - StarVisible27_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey27_1.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =10
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey27_1.Y
                                                                                    - Tk_Data_Termino_Evento_DataCard1_1:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicDateEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Tk_Data_Termino_Evento"
                                                                                          Default: =ThisItem.Tk_Data_Termino_Evento
                                                                                          DisplayName: =DataSourceInfo([@db_eventos_infra],DataSourceInfo.DisplayName,Tk_Data_Termino_Evento)
                                                                                          Required: =false
                                                                                          Update: =DataCardValue28_1.SelectedDate
                                                                                          Width: =Parent.Width/3
                                                                                          X: =1
                                                                                          Y: =1
                                                                                        Children:
                                                                                          - DataCardKey28_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: ="DATA TÉRMINO"
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                Wrap: =false
                                                                                                X: =10
                                                                                                Y: =10
                                                                                          - Container57:
                                                                                              Control: GroupContainer@1.3.0
                                                                                              Variant: ManualLayout
                                                                                              Properties:
                                                                                                BorderStyle: =BorderStyle.None
                                                                                                DropShadow: =DropShadow.None
                                                                                                Height: =30
                                                                                                RadiusBottomLeft: =5
                                                                                                RadiusBottomRight: =5
                                                                                                RadiusTopLeft: =5
                                                                                                RadiusTopRight: =5
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardKey28_1.Y + DataCardKey28_1.Height + 5
                                                                                              Children:
                                                                                                - DataCardValue28_1:
                                                                                                    Control: Classic/DatePicker@2.6.0
                                                                                                    Properties:
                                                                                                      BorderColor: =If(IsBlank(Tk_Data_Termino_Evento_DataCard1_1.Error), Parent.BorderColor, Color.Red)
                                                                                                      BorderStyle: =BorderStyle.None
                                                                                                      BorderThickness: =0
                                                                                                      DefaultDate: =If(DataCardValue26_1.Selected.Value = "Atendente Selecionado", Today(), Tk_Data_Termino_Evento_DataCard1_1.Default)
                                                                                                      DisplayMode: =Parent.DisplayMode
                                                                                                      EndYear: =Year(Today())+100
                                                                                                      FocusedBorderThickness: =1
                                                                                                      Height: =Parent.Height
                                                                                                      IconFill: =RGBA(255, 255, 255, 1)
                                                                                                      IsEditable: =true
                                                                                                      PaddingBottom: =0
                                                                                                      PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                                                                                      Size: =11
                                                                                                      StartYear: =1899
                                                                                                      Tooltip: =Tk_Data_Termino_Evento_DataCard1_1.DisplayName
                                                                                                      Width: |
                                                                                                        =Parent.Width
                                                                                          - ErrorMessage28_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardValue28_1.Y + DataCardValue28_1.Height
                                                                                          - StarVisible28_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey28_1.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =10
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey28_1.Y
                                                                                    - Observação_DataCard3_1:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicRichTextEditorEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Observa_x00e7__x00e3_o"
                                                                                          Default: =ThisItem.Observação
                                                                                          DisplayName: =DataSourceInfo([@db_eventos_infra],DataSourceInfo.DisplayName,Observa_x00e7__x00e3_o)
                                                                                          Height: =283
                                                                                          Required: =false
                                                                                          Update: =DataCardValue33_1.HtmlText
                                                                                          Visible: =If(DataCardValue26_1.Selected.Value = "Cancelamento", false, true)
                                                                                          Width: =If(!Self.Visible, 0, Parent.Width)
                                                                                          X: =2
                                                                                          Y: =1
                                                                                        Children:
                                                                                          - DataCardKey33_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: ="OBSERVAÇÃO"
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                Wrap: =false
                                                                                                X: =10
                                                                                                Y: =10
                                                                                          - DataCardValue33_1:
                                                                                              Control: RichTextEditor@2.7.0
                                                                                              MetadataKey: FieldValue
                                                                                              Properties:
                                                                                                BorderColor: =EsquemaDeCores.AzulEscuroBonin.Cor
                                                                                                Default: =Parent.Default
                                                                                                DisplayMode: =Parent.DisplayMode
                                                                                                Height: =220
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardKey33_1.Y + DataCardKey33_1.Height + 5
                                                                                          - ErrorMessage33_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardValue33_1.Y + DataCardValue33_1.Height
                                                                                          - StarVisible33_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey33_1.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =10
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey33_1.Y
                                                                                    - Tk_Motivo_Cancelamento_DataCard3_1:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicRichTextEditorEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Tk_Motivo_Cancelamento"
                                                                                          Default: =ThisItem.Tk_Motivo_Cancelamento
                                                                                          DisplayName: =DataSourceInfo([@db_eventos_infra],DataSourceInfo.DisplayName,Tk_Motivo_Cancelamento)
                                                                                          Required: =false
                                                                                          Update: =DataCardValue30_1.HtmlText
                                                                                          Visible: =If(DataCardValue26_1.Selected.Value = "Cancelamento", true, false)
                                                                                          Width: =If(!Self.Visible, 0, Parent.Width)
                                                                                          X: =0
                                                                                          Y: =2
                                                                                        Children:
                                                                                          - DataCardKey30_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: ="MOTIVO CANCELAMENTO"
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                Wrap: =false
                                                                                                X: =10
                                                                                                Y: =10
                                                                                          - DataCardValue30_1:
                                                                                              Control: RichTextEditor@2.7.0
                                                                                              MetadataKey: FieldValue
                                                                                              Properties:
                                                                                                BorderColor: =EsquemaDeCores.AzulEscuroBonin.Cor
                                                                                                Default: =Parent.Default
                                                                                                DisplayMode: =Parent.DisplayMode
                                                                                                Height: =220
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardKey30_1.Y + DataCardKey30_1.Height + 5
                                                                                          - ErrorMessage30_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: |
                                                                                                  =Parent.Width - 20
                                                                                                X: =10
                                                                                                Y: =DataCardValue30_1.Y + DataCardValue30_1.Height
                                                                                          - StarVisible30_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey30_1.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =10
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey30_1.Y
                                                                                    - Tk_TicketID_DataCard1_1:
                                                                                        Control: TypedDataCard@1.0.7
                                                                                        Variant: ClassicTextualEdit
                                                                                        Properties:
                                                                                          BorderColor: =App.Theme.Colors.Darker30
                                                                                          DataField: ="Tk_TicketID"
                                                                                          Default: =ThisItem.Tk_TicketID
                                                                                          DisplayName: =DataSourceInfo([@db_eventos_infra],DataSourceInfo.DisplayName,Tk_TicketID)
                                                                                          MaxLength: =DataSourceInfo([@db_eventos_infra], DataSourceInfo.MaxLength, Tk_TicketID)
                                                                                          Required: =false
                                                                                          Update: =DataCardValue25_2.Text
                                                                                          Visible: =false
                                                                                          Width: =300
                                                                                          X: =1
                                                                                          Y: =2
                                                                                        Children:
                                                                                          - DataCardKey25_2:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldName
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =34
                                                                                                Size: =12
                                                                                                Text: =Parent.DisplayName
                                                                                                Width: =Parent.Width - 60
                                                                                                Wrap: =false
                                                                                                X: =30
                                                                                                Y: =10
                                                                                          - DataCardValue25_2:
                                                                                              Control: Classic/TextInput@2.3.2
                                                                                              MetadataKey: FieldValue
                                                                                              Properties:
                                                                                                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                                                                                Default: =loc_InfoTicket.Tk_Ticket
                                                                                                DelayOutput: =true
                                                                                                DisplayMode: =Parent.DisplayMode
                                                                                                Height: =30
                                                                                                HoverBorderColor: =App.Theme.Colors.Darker30
                                                                                                HoverFill: =RGBA(186, 202, 226, 1)
                                                                                                MaxLength: =Parent.MaxLength
                                                                                                PaddingLeft: =5
                                                                                                RadiusBottomLeft: =0
                                                                                                RadiusBottomRight: =0
                                                                                                RadiusTopLeft: =0
                                                                                                RadiusTopRight: =0
                                                                                                Size: =11
                                                                                                Tooltip: =Parent.DisplayName
                                                                                                Width: =Parent.Width - 60
                                                                                                X: =30
                                                                                                Y: =DataCardKey25_2.Y + DataCardKey25_2.Height + 5
                                                                                          - ErrorMessage25_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: ErrorMessage
                                                                                              Properties:
                                                                                                AutoHeight: =true
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =RGBA(168, 0, 0, 1)
                                                                                                FontWeight: =FontWeight.Semibold
                                                                                                Height: =10
                                                                                                Live: =Live.Assertive
                                                                                                PaddingBottom: =0
                                                                                                PaddingLeft: =0
                                                                                                PaddingRight: =0
                                                                                                PaddingTop: =0
                                                                                                Size: =14
                                                                                                Text: =Parent.Error
                                                                                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                                                                                Width: =Parent.Width - 60
                                                                                                X: =30
                                                                                                Y: =DataCardValue25_2.Y + DataCardValue25_2.Height
                                                                                          - StarVisible25_1:
                                                                                              Control: Label@2.5.1
                                                                                              MetadataKey: FieldRequired
                                                                                              Properties:
                                                                                                Align: =Align.Center
                                                                                                BorderColor: =RGBA(0, 0, 0, 1)
                                                                                                Color: =App.Theme.Colors.Darker30
                                                                                                Height: =DataCardKey25_2.Height
                                                                                                Text: ="*"
                                                                                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                                                                                Width: =30
                                                                                                Wrap: =false
                                                                                                Y: =DataCardKey25_2.Y
                                                                        - Container60:
                                                                            Control: GroupContainer@1.3.0
                                                                            Variant: ManualLayout
                                                                            Properties:
                                                                              BorderStyle: =BorderStyle.None
                                                                              DropShadow: =DropShadow.None
                                                                              FillPortions: =0
                                                                              Height: =Medidas.Espacamento
                                                                              RadiusBottomLeft: =0
                                                                              RadiusBottomRight: =0
                                                                              RadiusTopLeft: =0
                                                                              RadiusTopRight: =0
                                                                              X: =40
                                                                              Y: =40
                                                                  - Container47_1:
                                                                      Control: GroupContainer@1.3.0
                                                                      Variant: ManualLayout
                                                                      Properties:
                                                                        DropShadow: =DropShadow.None
                                                                        FillPortions: =0
                                                                        Height: =50
                                                                        RadiusBottomLeft: =0
                                                                        RadiusBottomRight: =0
                                                                        RadiusTopLeft: =0
                                                                        RadiusTopRight: =0
                                                                      Children:
                                                                        - Button4_3:
                                                                            Control: Classic/Button@2.2.0
                                                                            Properties:
                                                                              BorderColor: =ColorFade(Self.Fill, -15%)
                                                                              Color: =RGBA(255, 255, 255, 1)
                                                                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                                                              Fill: =EsquemaDeCores.AzulEscuroBonin.Cor
                                                                              Height: =Parent.Height
                                                                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                                                              HoverColor: =RGBA(255, 255, 255, 1)
                                                                              HoverFill: =ColorFade(EsquemaDeCores.AzulEscuroBonin.Cor, -20%)
                                                                              OnSelect: |-
                                                                                =If(DataCardValue26_1.Selected.Value = "Abertura do Ticket",
                                                                                    UpdateContext({AtualizacaoHistorico:false});
                                                                                    UpdateContext({EditarHistorico:false});
                                                                                    SubmitForm(Form_Lancamento_Historico_1),
                                                                                If(DataCardValue26_1.Selected.Value = "Atendente Selecionado",
                                                                                    Patch(
                                                                                        db_tickets_infra,
                                                                                        LookUp(db_tickets_infra, Tk_Ticket = loc_InfoTicket.Tk_Ticket),
                                                                                        {
                                                                                            Tk_Status_Ticket: "Iniciado"
                                                                                        }
                                                                                    );
                                                                                    'BONINHELPDESK-ATUALIZAÇÃODEEVENTOS'.Run(loc_InfoTicket.Tk_Email_Solicitante,
                                                                                        loc_InfoTicket.Tk_Nome_Solicitante,
                                                                                        Requisicao,
                                                                                        loc_InfoTicket.Tk_Ticket,
                                                                                        "Iniciado",
                                                                                        DataCardValue26_1.Selected.Value,
                                                                                        UsuáriosdoOffice365.UserProfile(DataCardValue22_3.Selected.Value).DisplayName
                                                                                    );
                                                                                    UpdateContext({AtualizacaoHistorico:false});
                                                                                    UpdateContext({EditarHistorico:false});
                                                                                    SubmitForm(Form_Lancamento_Historico_1);
                                                                                    SubmitForm(Form_Selecao_Atendente_3),
                                                                                If(DataCardValue26_1.Selected.Value = "Atendimento",
                                                                                    Patch(
                                                                                        db_tickets_infra,
                                                                                        LookUp(db_tickets_infra, Tk_Ticket = loc_InfoTicket.Tk_Ticket),
                                                                                        {
                                                                                            Tk_Status_Ticket: "Em Andamento"
                                                                                        }
                                                                                    );
                                                                                    'BONINHELPDESK-ATUALIZAÇÃODEEVENTOS'.Run(loc_InfoTicket.Tk_Email_Solicitante,
                                                                                        loc_InfoTicket.Tk_Nome_Solicitante,
                                                                                        Requisicao,
                                                                                        loc_InfoTicket.Tk_Ticket,
                                                                                        "Em Andamento",
                                                                                        DataCardValue26_1.Selected.Value,
                                                                                        UsuáriosdoOffice365.UserProfile(loc_InfoTicket.Tk_Atendente.Value).DisplayName
                                                                                    );
                                                                                    UpdateContext({AtualizacaoHistorico:false});
                                                                                    UpdateContext({EditarHistorico:false});
                                                                                    SubmitForm(Form_Lancamento_Historico_1),
                                                                                If(DataCardValue26_1.Selected.Value = "Pausa no Atendimento",
                                                                                    Patch(
                                                                                        db_tickets_infra,
                                                                                        LookUp(db_tickets_infra, Tk_Ticket = loc_InfoTicket.Tk_Ticket),
                                                                                        {
                                                                                            Tk_Status_Ticket: "Suspensão"
                                                                                        }
                                                                                    );
                                                                                    'BONINHELPDESK-ATUALIZAÇÃODEEVENTOS'.Run(loc_InfoTicket.Tk_Email_Solicitante,
                                                                                        loc_InfoTicket.Tk_Nome_Solicitante,
                                                                                        Requisicao,
                                                                                        loc_InfoTicket.Tk_Ticket,
                                                                                        "Suspensão",
                                                                                        DataCardValue26_1.Selected.Value,
                                                                                        UsuáriosdoOffice365.UserProfile(loc_InfoTicket.Tk_Atendente.Value).DisplayName
                                                                                    );
                                                                                    UpdateContext({AtualizacaoHistorico:false});
                                                                                    UpdateContext({EditarHistorico:false});
                                                                                    SubmitForm(Form_Lancamento_Historico_1),
                                                                                If(DataCardValue26_1.Selected.Value = "Cancelamento",
                                                                                    Patch(
                                                                                        db_tickets_infra,
                                                                                        LookUp(db_tickets_infra, Tk_Ticket = loc_InfoTicket.Tk_Ticket),
                                                                                        {
                                                                                            Tk_Status_Ticket: "Cancelado"
                                                                                        }
                                                                                    );
                                                                                    'BONINHELPDESK-ATUALIZAÇÃODEEVENTOS'.Run(loc_InfoTicket.Tk_Email_Solicitante,
                                                                                        loc_InfoTicket.Tk_Nome_Solicitante,
                                                                                        Requisicao,
                                                                                        loc_InfoTicket.Tk_Ticket,
                                                                                        "Suspensão",
                                                                                        DataCardValue26_1.Selected.Value,
                                                                                        UsuáriosdoOffice365.UserProfile(loc_InfoTicket.Tk_Atendente.Value).DisplayName
                                                                                    );
                                                                                    UpdateContext({AtualizacaoHistorico:false});
                                                                                    UpdateContext({EditarHistorico:false});
                                                                                    SubmitForm(Form_Lancamento_Historico_1),
                                                                                If(DataCardValue26_1.Selected.Value = "Concluído",
                                                                                    Patch(
                                                                                        db_tickets_infra,
                                                                                        LookUp(db_tickets_infra, Tk_Ticket = loc_InfoTicket.Tk_Ticket),
                                                                                        {
                                                                                            Tk_Status_Ticket: "Concluído"
                                                                                        }
                                                                                    );
                                                                                    Patch(
                                                                                        db_nps_infra,
                                                                                        Defaults(db_nps_infra),
                                                                                        {
                                                                                            Tk_TicketID: loc_InfoTicket.Tk_Ticket,
                                                                                            Tk_Status_NPS: "Aguardando Pesquisa",
                                                                                            Tk_Solicitante: loc_InfoTicket.Tk_Email_Solicitante
                                                                                        }
                                                                                    );
                                                                                    'BONINHELPDESK-ATUALIZAÇÃODEEVENTOS'.Run(loc_InfoTicket.Tk_Email_Solicitante,
                                                                                        loc_InfoTicket.Tk_Nome_Solicitante,
                                                                                        Requisicao,
                                                                                        loc_InfoTicket.Tk_Ticket,
                                                                                        "Concluído",
                                                                                        "Conclusão do Chamado",
                                                                                        UsuáriosdoOffice365.UserProfile(loc_InfoTicket.Tk_Atendente.Value).DisplayName
                                                                                    );
                                                                                    UpdateContext({AtualizacaoHistorico:false});
                                                                                    UpdateContext({EditarHistorico:false});
                                                                                    SubmitForm(Form_Lancamento_Historico_1)
                                                                                ))))));
                                                                                ClearCollect(colTicketInfra_Atendimento, Filter(db_tickets_infra, Tk_Ticket = loc_InfoTicket.Tk_Ticket));
                                                                                UpdateContext({loc_InfoTicket: First(colTicketInfra_Atendimento)});
                                                                              PressedBorderColor: =Self.Fill
                                                                              PressedColor: =Self.Fill
                                                                              PressedFill: =Self.Color
                                                                              Text: ="LANÇAR"
                                                                              Width: =Parent.Width
                        - Container15_24:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              BorderStyle: =BorderStyle.None
                              DropShadow: =DropShadow.None
                              Fill: =RGBA(255, 255, 255, 0.8)
                              Height: =Parent.Height
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =VarInfraCtnDeletar
                              Width: =Parent.Width
                            Children:
                              - Container18_14:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    Fill: =RGBA(241, 244, 249, 1)
                                    Height: =400
                                    RadiusBottomLeft: =10
                                    RadiusBottomRight: =10
                                    RadiusTopLeft: =10
                                    RadiusTopRight: =10
                                    Width: =800
                                    X: =Parent.Width/2 - Self.Width/2
                                    Y: =Parent.Height/2 - Self.Height/2
                                  Children:
                                    - HtmlText1_1:
                                        Control: HtmlViewer@2.1.0
                                        Properties:
                                          Height: =Parent.Height
                                          HtmlText: "=\"<div style='\r\n    max-width: 100%;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 10px;\r\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n    padding: 16px;\r\n    background-color: #ffffff;\r\n    font-family: \"& App.Theme.Font & \", Arial, sans-serif;\r\n    color: #333;\r\n'>\r\n  <h3 style='\r\n      margin-top: 0;\r\n      margin-bottom: 12px;\r\n      font-size: 18pt;\r\n      color: #d32f2f;\r\n  '>\r\n    ⚠️ Confirmação de Exclusão\r\n  </h3>\r\n  \r\n  <p style='\r\n      margin: 8px 0;\r\n      font-size: 16pt;\r\n      line-height: 1.4;\r\n  '>\r\n    Gostaria de deletar o chamado:\r\n  </p>\r\n  \r\n  <div style='\r\n      background-color: #f5f5f5;\r\n      border-radius: 6px;\r\n      padding: 10px;\r\n      margin-bottom: 8px;\r\n  '>\r\n    <p style='margin: 0; font-size: 16pt; font-weight: bold; color: #1976d2;'>\" \r\n    & varInfraDeletar.Tk_Ticket &\r\n    \"</p>\r\n  </div>\r\n  \r\n  <p style='\r\n      margin: 6px 0 2px 0;\r\n      font-size: 16pt;\r\n      font-weight: bold;\r\n      color: #555;\r\n  '>\r\n    Tipo do Chamado:\r\n  </p>\r\n  <p style='\r\n      margin: 2px 0 10px 0;\r\n      font-size: 16pt;\r\n      color: #777;\r\n  '>\r\n    \" & varInfraDeletar.Tk_Tipo_Ticket &\r\n  \"</p>\r\n  \r\n  <p style='\r\n      margin: 6px 0 2px 0;\r\n      font-size: 16pt;\r\n      font-weight: bold;\r\n      color: #555;\r\n  '>\r\n    Empresa Solicitante:\r\n  </p>\r\n  <p style='\r\n      margin: 2px 0 0 0;\r\n      font-size: 16pt;\r\n      color: #777;\r\n  '>\r\n    \" & varInfraDeletar.Tk_Empresa_Solicitante &\r\n  \"</p>\r\n</div>\"\r\n"
                                          Width: =Parent.Width
                                    - Button7_1:
                                        Control: Classic/Button@2.2.0
                                        Properties:
                                          BorderColor: =ColorFade(Self.Fill, -15%)
                                          BorderThickness: =1
                                          Color: =RGBA(255, 255, 255, 1)
                                          DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                          Fill: =RGBA(56, 96, 178, 1)
                                          FocusedBorderThickness: =1
                                          HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                          HoverColor: =RGBA(255, 255, 255, 1)
                                          HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                          OnSelect: |-
                                            =UpdateContext({varInfraDeletar: Blank()});
                                            UpdateContext({VarInfraCtnDeletar: false});
                                          PressedBorderColor: =Self.Fill
                                          PressedColor: =Self.Fill
                                          PressedFill: =Self.Color
                                          Text: ="Não"
                                          X: =Parent.Width/2 + 20
                                          Y: =Parent.Height - Self.Height - 20
                                    - Button6_1:
                                        Control: Classic/Button@2.2.0
                                        Properties:
                                          BorderColor: =ColorFade(Self.Fill, -15%)
                                          BorderThickness: =1
                                          Color: =RGBA(255, 255, 255, 1)
                                          DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                          Fill: =RGBA(56, 96, 178, 1)
                                          FocusedBorderThickness: =1
                                          HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                          HoverColor: =RGBA(255, 255, 255, 1)
                                          HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                          OnSelect: |
                                            =// 1. Busca os registros que devem ser excluídos em coleções temporárias
                                            ClearCollect(colExcluir_eventos_infra, Filter(db_eventos_infra, Tk_TicketID = varInfraDeletar.Ticket));
                                            ClearCollect(colExcluir_nps_infra, Filter(db_nps_infra, Tk_TicketID = varInfraDeletar.Ticket));
                                            ClearCollect(colExcluir_tickets_infra, Filter(db_tickets_infra, Tk_Ticket = varInfraDeletar.Ticket));

                                            // 2. Exclui um a um usando as coleções
                                            ForAll(colExcluir_eventos_infra, Remove(db_eventos_infra, ThisRecord));
                                            ForAll(colExcluir_nps_infra, Remove(db_nps_infra, ThisRecord));
                                            ForAll(colExcluir_tickets_infra, Remove(db_tickets_infra, ThisRecord));

                                            // 3. Notificação de sucesso
                                            Notify("Chamado e registros relacionados excluídos com sucesso!", NotificationType.Success, 3000);

                                            // 4. Limpa coleções temporárias e variáveis de controle
                                            Clear(colExcluir_eventos_infra);
                                            Clear(colExcluir_nps_infra);
                                            Clear(colExcluir_tickets_infra);
                                            UpdateContext({varInfraDeletar: Blank()});
                                            UpdateContext({VarInfraCtnDeletar: false});
                                          PressedBorderColor: =Self.Fill
                                          PressedColor: =Self.Fill
                                          PressedFill: =Self.Color
                                          Text: ="Sim"
                                          X: =Parent.Width/2 - Self.Width - 20
                                          Y: =Parent.Height - Self.Height - 20
      - sigd_bonin_cabecalho_27:
          Control: CanvasComponent
          ComponentName: sigd_bonin_cabecalho
          Properties:
            AlturaCabeçalho: =50
            EixoX: =VarEixoXSideBar + VarLarguraSidebar
            EixoY: =VarEixoYSideBar
            EsquemaDeCores: =EsquemaDeCores
            Height: =sigd_bonin_cabecalho_27.AlturaCabeçalho
            ListaDasTelas: =colTelas
            Medidas: =Medidas
            RaioDaBorda: ="10px 10px 10px 10px"
            Width: =App.Width - VarLarguraSidebar
            X: =sigd_bonin_cabecalho_27.EixoX
            Y: =sigd_bonin_cabecalho_27.EixoY
      - sigd_bonin_sidebar_27:
          Control: CanvasComponent
          ComponentName: sigd_bonin_sidebar
          Properties:
            Espaçamento: =Medidas.Espacamento
            EsquemaDeCores: =EsquemaDeCores
            EstadoMenuEntrada: =gblFecharMenu
            Height: =Self.TelaAltura
            LarguraMenuAberto: =240
            LarguraMenuFechado: =80
            LarguraSubmenu: =240
            ListaDasTelas: =colTelas
            ListaDeIcones: =ColLogo
            OnSelect: =
            RaioDaBorda: ="10px 10px 10px 10px"
            TelaAltura: =Medidas.TelaAltura
            TelaLargura: =Medidas.TelaLargura
            Width: =Self.LarguraTotalSaida
