"'Planejamento Or√ßament√°rio Screen' As screen":
    OnVisible: |-
        =ClearCollect(
            colNomesMesesPlanejamento,
            {NomeDoMes: "1¬∫ M√äS"},
            {NomeDoMes: "2¬∫ M√äS"},
            {NomeDoMes: "3¬∫ M√äS"},
            {NomeDoMes: "4¬∫ M√äS"},
            {NomeDoMes: "5¬∫ M√äS"},
            {NomeDoMes: "6¬∫ M√äS"},
            {NomeDoMes: "7¬∫ M√äS"},
            {NomeDoMes: "8¬∫ M√äS"},
            {NomeDoMes: "9¬∫ M√äS"},
            {NomeDoMes: "10¬∫ M√äS"},
            {NomeDoMes: "11¬∫ M√äS"},
            {NomeDoMes: "12¬∫ M√äS"},
            {NomeDoMes: "13¬∫ M√äS"},
            {NomeDoMes: "14¬∫ M√äS"},
            {NomeDoMes: "15¬∫ M√äS"},
            {NomeDoMes: "16¬∫ M√äS"},
            {NomeDoMes: "17¬∫ M√äS"},
            {NomeDoMes: "18¬∫ M√äS"},
            {NomeDoMes: "P√ìS OBRA"}
        )

    app_cpn_bonin_13 As app_cpn_bonin:
        OnSelect: =

    Label1_133 As label:
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Arial
        FontWeight: =FontWeight.Semibold
        Height: =100
        Size: =18
        Text: ="SISTEMA INTEGRADO DE GEST√ÉO E DESENVOLVIMENTO BJMM - PLANEJAMENTO OR√áAMENT√ÅRIO"
        Width: =Parent.Width - Self.X - 10
        Wrap: =false
        X: =230
        ZIndex: =2

    Container1_11 As groupContainer.manualLayoutContainer:
        BorderStyle: =BorderStyle.None
        DropShadow: =DropShadow.None
        Height: =Parent.Height - Self.Y
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Width: =Parent.Width - Self.X - 10 
        X: =230
        Y: =110
        ZIndex: =3

        Container2_8 As groupContainer.horizontalAutoLayoutContainer:
            DropShadow: =DropShadow.None
            Height: =Parent.Height
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =10
            LayoutMode: =LayoutMode.Auto
            PaddingBottom: =10
            PaddingLeft: =10
            PaddingRight: =10
            PaddingTop: =10
            RadiusBottomLeft: =10
            RadiusBottomRight: =10
            RadiusTopLeft: =10
            RadiusTopRight: =10
            Width: =Parent.Width
            ZIndex: =2

            Container3_6 As groupContainer.horizontalAutoLayoutContainer:
                DropShadow: =DropShadow.None
                Fill: =RGBA(45, 65, 93, 1)
                FillPortions: =0
                Height: =70
                LayoutGap: =10
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingBottom: =5
                PaddingLeft: =5
                PaddingTop: =5
                RadiusBottomLeft: =10
                RadiusBottomRight: =10
                RadiusTopLeft: =10
                RadiusTopRight: =10
                ZIndex: =1

                Container5_16 As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Fill: =RGBA(255, 255, 255, 1)
                    FillPortions: =0
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMinHeight: |
                        =0
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =5
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =10
                    RadiusBottomRight: =10
                    RadiusTopLeft: =10
                    RadiusTopRight: =10
                    Width: =200
                    ZIndex: =1

                    Label1_141 As label:
                        Align: =Align.Justify
                        AlignInContainer: =AlignInContainer.Stretch
                        FillPortions: =1
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Semibold
                        LayoutMinHeight: =0
                        Size: =10
                        Text: ="üîé CONTRATO "
                        Width: =100
                        ZIndex: =1

                    TextInput1_16 As text:
                        AlignInContainer: =AlignInContainer.Stretch
                        BorderColor: =RGBA(45, 65, 93, 1)
                        Default: =
                        FillPortions: =1
                        Font: =Font.Arial
                        HintText: =""
                        LayoutMinHeight: =0
                        LayoutMinWidth: =0
                        Size: =10
                        Width: =0
                        ZIndex: =2

                Container5_17 As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Fill: =RGBA(255, 255, 255, 1)
                    FillPortions: =0
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMinHeight: |
                        =0
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =5
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =10
                    RadiusBottomRight: =10
                    RadiusTopLeft: =10
                    RadiusTopRight: =10
                    Width: =250
                    X: =40
                    Y: =40
                    ZIndex: =2

                    Label1_142 As label:
                        Align: =Align.Justify
                        AlignInContainer: =AlignInContainer.Stretch
                        FillPortions: =1
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Semibold
                        LayoutMinHeight: =0
                        Size: =10
                        Text: ="üîé OBJETO REDUZIDO "
                        Width: =100
                        ZIndex: =1

                    TextInput1_17 As text:
                        AlignInContainer: =AlignInContainer.Stretch
                        BorderColor: =RGBA(45, 65, 93, 1)
                        Default: =
                        FillPortions: =1
                        Font: =Font.Arial
                        HintText: =""
                        LayoutMinHeight: =0
                        LayoutMinWidth: =0
                        Size: =10
                        Width: =0
                        ZIndex: =2

                Container5_18 As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Fill: =RGBA(255, 255, 255, 1)
                    FillPortions: =0
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMinHeight: |
                        =0
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =5
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =10
                    RadiusBottomRight: =10
                    RadiusTopLeft: =10
                    RadiusTopRight: =10
                    Width: =250
                    X: =40
                    Y: =40
                    ZIndex: =3

                    Label1_143 As label:
                        Align: =Align.Justify
                        AlignInContainer: =AlignInContainer.Stretch
                        FillPortions: =1
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Semibold
                        LayoutMinHeight: =0
                        Size: =10
                        Text: ="üîé CONTRATADA "
                        Width: =100
                        ZIndex: =1

                    TextInput1_18 As text:
                        AlignInContainer: =AlignInContainer.Stretch
                        BorderColor: =RGBA(45, 65, 93, 1)
                        Default: =
                        FillPortions: =1
                        Font: =Font.Arial
                        HintText: =""
                        LayoutMinHeight: =0
                        LayoutMinWidth: =0
                        Size: =10
                        Width: =0
                        ZIndex: =2

            Container4_7 As groupContainer.manualLayoutContainer:
                BorderStyle: =BorderStyle.None
                DropShadow: =DropShadow.None
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                RadiusBottomLeft: =10
                RadiusBottomRight: =10
                RadiusTopLeft: =10
                RadiusTopRight: =10
                ZIndex: =2

                Container8_14 As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Fill: =RGBA(45, 65, 93, 1)
                    Height: =Parent.Height
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =5
                    PaddingLeft: =5
                    PaddingRight: =5
                    PaddingTop: =5
                    RadiusBottomLeft: =10
                    RadiusBottomRight: =10
                    RadiusTopLeft: =10
                    RadiusTopRight: =10
                    Width: =Parent.Width
                    ZIndex: =1

                    Gallery3_5 As gallery.variableTemplateHeightGallery:
                        '#CopilotOverlayLabel': ="Filtrada"
                        BorderColor: =
                        DelayItemLoading: =true
                        Height: =Parent.Height
                        Items: |-
                            =Filter(
                                db_cont_contrato,
                                IsBlank(TextInput1_16.Text) || StartsWith(n_contrato, TextInput1_16.Text),
                                IsBlank(TextInput1_17.Text) || StartsWith(objeto_reduzido, TextInput1_17.Text),
                                IsBlank(TextInput1_18.Text) || StartsWith(contratada, TextInput1_18.Text))
                        Layout: =Layout.Vertical
                        LayoutMinHeight: =0
                        LayoutMinWidth: =320
                        LoadingSpinner: =LoadingSpinner.Data
                        ShowScrollbar: =false
                        TemplateSize: =60
                        Width: =Parent.Width
                        ZIndex: =1

                        Gallery1_2 As gallery.variableTemplateHeightGallery:
                            '#CopilotOverlayLabel': ="Filtrada"
                            DelayItemLoading: =true
                            Height: |-
                                =If(varQuantidadeItensDetalhado = 0,
                                Self.AllItemsCount * 30 * 2 + (35 * varQuantidadeItensDetalhado),
                                Self.AllItemsCount * 35 * 2 + (3.37 * varQuantidadeItensDetalhado + 20))
                            Items: =Filter(db_cont_empreendimento, n_contrato = ThisItem.n_contrato)
                            Layout: =Layout.Vertical
                            LoadingSpinner: =LoadingSpinner.Data
                            ShowScrollbar: =false
                            TemplatePadding: =0
                            TemplateSize: =50
                            Visible: =varExpandido = ThisItem.ID
                            Width: =Parent.TemplateWidth-Self.X
                            X: =1
                            Y: =60
                            ZIndex: =1

                            Container7_21 As groupContainer.manualLayoutContainer:
                                DropShadow: =DropShadow.Semilight
                                Fill: =RGBA(255, 255, 255, 1)
                                Height: =htmltxt_historico_2.Height + If(htmltxt_historico_viajantes_2.Visible, htmltxt_historico_viajantes_2.Height, 0)
                                RadiusBottomLeft: =10
                                RadiusBottomRight: =10
                                RadiusTopLeft: =10
                                RadiusTopRight: =10
                                Width: =Parent.Width
                                ZIndex: =1

                                htmltxt_historico_viajantes_2 As htmlViewer:
                                    AutoHeight: =true
                                    Color: =RGBA(0, 0, 0, 0)
                                    Fill: =RGBA(214, 223, 238, 1)
                                    Height: =103
                                    HtmlText: |-
                                        ="<div style='" &
                                            "width:100%; " &
                                            "overflow-x: auto;" & // Mant√©m a barra de rolagem horizontal
                                            "font-family:Segoe UI; " &
                                            "font-size:11px; " &
                                            "color:white; " &
                                            "background-color: #2b3b55; " &
                                            "padding: 15px; " &
                                            "border-radius: 8px; " &
                                            "box-shadow: 2px 2px 5px rgba(0,0,0,0.3);" &
                                        "'>" &
                                        
                                            "<h2 style='font-size:18px; font-weight:bold; margin-bottom:15px; color:white; text-align: left;'>" &
                                                "PLANEJAMENTO OR√áAMENT√ÅRIO" &
                                            "</h2>" &
                                        
                                            "<table style='" &
                                                "width:1px; " & // Use '1px' para for√ßar o layout fixo
                                                "table-layout: fixed; " & // ESSENCIAL para fixar larguras
                                                "min-width: 2560px; " & // Ajuste este valor. Ex: 80(item) + 250(desc) + 200(valor total) + 18*120(meses) = 530 + 2160 = 2690px.
                                                                        // Coloquei 2560px, voc√™ pode ajustar para caber o texto.
                                                "border-collapse: collapse; " &
                                                "border: 1px solid #4a6184; " &
                                            "'>" &
                                                "<thead>" &
                                                    "<tr style='height: 25px; background-color: #3b5073; color: white;'>" &
                                                        // Larguras fixas para as colunas do cabe√ßalho
                                                        "<th style='width:80px; padding: 8px; text-align: left; border: 1px solid #4a6184;'>ITEM</th>" &
                                                        "<th style='width:250px; padding: 8px; text-align: left; border: 1px solid #4a6184; word-wrap: break-word;'>DESCRI√á√ÉO DOS SERVI√áOS</th>" &
                                                        "<th style='width:200px; padding: 8px; text-align: center; border: 1px solid #4a6184;'>VALOR TOTAL</th>" &
                                                        
                                                        Concat(colNomesMesesPlanejamento As MesHeader, // Alias para o cabe√ßalho dos meses
                                                        "<th style='width:120px; padding: 8px; text-align: center; border: 1px solid #4a6184;'>" & MesHeader.NomeDoMes & "</th>" // <--- LARGURA DO M√äS NO CABE√áALHO (120px)
                                                        ) &
                                                    "</tr>" &
                                                "</thead>" &
                                        
                                                "<tbody>" &
                                                    Concat( // CONCAT PRINCIPAL PARA GRUPOS
                                                        GroupBy(
                                                            SortByColumns(
                                                                colPlanejamentoEmpreendimento,
                                                                "item_grupo", SortOrder.Ascending,
                                                                "nivel_1", SortOrder.Ascending
                                                            ),
                                                            item_grupo,
                                                            DadosDoGrupo
                                                        ) As Grupo,
                                                        
                                                        With({
                                                            TotalGrupoValor: Sum(Grupo.DadosDoGrupo, Coalesce(valor_bdi, 0)) // Usando valor_bdi
                                                        },
                                                        // Linha de T√≠tulo do Grupo
                                                        "<tr>" &
                                                            "<td colspan='2' style='padding: 8px; text-align: left; background-color: #4a6184; color: white; font-weight: bold; border: 1px solid #6c88b7;'>" &
                                                                Coalesce(Grupo.item_grupo, "") &
                                                            "</td>" &
                                                            "<td style='width:200px; padding: 8px; text-align: right; background-color: #4a6184; color: white; font-weight: bold; border: 1px solid #6c88b7;'>" &
                                                                Text(TotalGrupoValor, "[$-pt-BR]R$ #.##0,00") &
                                                            "</td>" &
                                                            Concat(colNomesMesesPlanejamento As MesCalcGrupo, // Alias para calculo de meses do grupo
                                                                With({
                                                                    TotalMesGrupo: Sum(Filter(Grupo.DadosDoGrupo, num_mes = MesCalcGrupo.NomeDoMes), Coalesce(valor_bdi, 0)) // Usando valor_bdi
                                                                },
                                                                "<td style='width:120px; padding: 8px; text-align: center; background-color: #4a6184; color: white; font-weight: bold; border: 1px solid #6c88b7;'>" & // <--- LARGURA DO M√äS NO TD DE GRUPO (120px)
                                                                    If(TotalMesGrupo > 0, Text(TotalMesGrupo, "[$-pt-BR]R$ #.##0,00"), "-") &
                                                                "</td>"
                                                                )
                                                            ) &
                                                        "</tr>" &
                                        
                                                        // Gera√ß√£o das Linhas de Detalhe dentro de cada Grupo
                                                        Concat(
                                                            GroupBy(
                                                                Sort(Grupo.DadosDoGrupo, nivel_1, SortOrder.Ascending),
                                                                nivel_1,
                                                                DadosDoItem
                                                            ) As ItemDetalhe,
                                                            
                                                            With({
                                                                DescricaoItem: Coalesce(First(ItemDetalhe.DadosDoItem).descricao, ""),
                                                                TotalItemAnual: Sum(Filter(colPlanejamentoEmpreendimento, 
                                                                                    item_grupo = Grupo.item_grupo && 
                                                                                    nivel_1 = ItemDetalhe.nivel_1), 
                                                                                    Coalesce(valor_bdi, 0)) // Usando valor_bdi
                                                            },
                                                            "<tr>" &
                                                                "<td style='width:80px; padding: 8px; text-align: left; background-color: #3b5073; color: white; border: 1px solid #4a6184;'>" & Coalesce(ItemDetalhe.nivel_1, "") & "</td>" & 
                                                                "<td style='width:250px; padding: 8px; text-align: left; background-color: #3b5073; color: white; border: 1px solid #4a6184; word-wrap: break-word;'>" & DescricaoItem & "</td>" & 
                                                                "<td style='width:200px; padding: 8px; text-align: right; background-color: #3b5073; color: white; border: 1px solid #4a6184;'>" & Text(TotalItemAnual, "[$-pt-BR]R$ #.##0,00") & "</td>" & 
                                                                
                                                                Concat(colNomesMesesPlanejamento As MesDetalhe,
                                                                    With({
                                                                        DadosDoMes: LookUp(
                                                                            ItemDetalhe.DadosDoItem,
                                                                            num_mes = MesDetalhe.NomeDoMes
                                                                        )
                                                                    },
                                                                    "<td style='width:120px; padding: 2px; text-align: center; vertical-align: top; border: 1px solid #4a6184;'>" & // <--- LARGURA DO M√äS NO TD DE DETALHE (120px)
                                                                        If(
                                                                            !IsBlank(DadosDoMes) && Coalesce(DadosDoMes.percentual_previsto, 0) > 0,
                                                                            "<div style='background-color: #5d81b9; color: white; padding: 5px; border-radius: 4px; font-size:9px; margin: 3px; box-shadow: 1px 1px 2px rgba(0,0,0,0.2);'>" &
                                                                                Text(Coalesce(DadosDoMes.percentual_previsto, 0) * 100, "[$-pt-BR] #.##0,00%") &
                                                                                "<div style='font-size:9px; opacity:0.8;'>" & Text(Coalesce(DadosDoMes.valor_bdi, 0), "[$-pt-BR]R$ #.##0,00") & "</div>" & 
                                                                            "</div>",
                                                                            "-"
                                                                        ) &
                                                                    "</td>"
                                                                    )
                                                                ) &
                                                            "</tr>"
                                                            )
                                                        ) &
                                                        "<tr><td colspan='" & (3 + CountRows(colNomesMesesPlanejamento)) & "' style='height:15px; background-color: #2b3b55;'></td></tr>"
                                                        )
                                                    ) &
                                        
                                                    // Linha de TOTAL GERAL
                                                    With({
                                                        TotalGeralValor: Sum(colPlanejamentoEmpreendimento, Coalesce(valor_bdi, 0)) // Usando valor_bdi
                                                    },
                                                    "<tr style='height: 45px; background-color: #5d81b9; color: white; font-weight: bold;'>" &
                                                        "<td colspan='2' style='padding: 8px; text-align: right; border: 1px solid #6c88b7;'>TOTAL GERAL:</td>" &
                                                        "<td style='width:200px; padding: 8px; text-align: right; border: 1px solid #6c88b7;'>" & Text(TotalGeralValor, "[$-pt-BR]R$ #.##0,00") & "</td>" & 
                                                        
                                                        Concat(colNomesMesesPlanejamento As MesTotalGeral,
                                                            With({
                                                                TotalMesGeral: Sum(Filter(colPlanejamentoEmpreendimento, num_mes = MesTotalGeral.NomeDoMes), Coalesce(valor_bdi, 0)) // Usando valor_bdi
                                                            },
                                                            // <--- AQUI EST√Å A CORRE√á√ÉO PRINCIPAL: APENAS O CONTE√öDO DA C√âLULA E NADA MAIS.
                                                            "<td style='width:120px; padding: 8px; text-align: center; border: 1px solid #6c88b7;'>" & // <--- LARGURA DO M√äS NO TD DE TOTAL GERAL (120px)
                                                                If(TotalMesGeral > 0, Text(TotalMesGeral, "[$-pt-BR]R$ #.##0,00"), "-") &
                                                            "</td>"
                                                            )
                                                        ) &
                                                    "</tr>"
                                                    ) &
                                                "</tbody>" &
                                            "</table>" &
                                        "</div>"
                                    OnSelect: =
                                    Visible: =varHistoricoExpandido = ThisItem.id_contrato_empreendimento
                                    Width: =Parent.Width
                                    Y: =htmltxt_historico_2.Y + htmltxt_historico_2.Height
                                    ZIndex: =1

                                htmltxt_historico_2 As htmlViewer:
                                    BorderColor: =RGBA(0, 0, 0, 0)
                                    Fill: =RGBA(214, 223, 238, 1)
                                    Height: =60
                                    HtmlText: |-
                                        ="<div style='width:100%; height:auto; font-family:Segoe UI; font-size:12px; color:#2d415d; padding:10px;'>
                                        
                                          <!-- Nome -->
                                          <div style='font-size:14px; font-weight:bold; margin-bottom:2px;'>
                                            " & Concatenate(LookUp(db_cont_empreendimento, n_contrato = ThisItem.n_contrato, id_contrato_empreendimento), " - ", LookUp(db_cont_empreendimento, n_contrato = ThisItem.n_contrato, empreendimento)) & "
                                          </div>
                                        
                                        <!-- Linha 1: SEI, Contratada, CNPJ Contratada, Data Assinatura -->
                                          <div style='display:flex; gap:20px; flex-wrap:wrap; margin-bottom:2px; line-height:1.2em;'>
                                            <div style='flex:1'><strong>SEI:</strong> " & ThisItem.construtora & "</div>
                                            <div style='flex:1'><strong>Data Assinatura:</strong> " & ThisItem.empreendimento & "</div>
                                            <div style='flex:1'><strong>Valor Contrato:</strong> " & Text(ThisItem.n_unidade_habitacional, "[$-pt-BR]R$ #.##0,00") & "</div>
                                          </div>
                                        </div>"
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Width: =Parent.Width
                                    ZIndex: =2

                                icn_expandir_5 As icon:
                                    BorderColor: =App.Theme.Colors.Darker40
                                    Color: =Color.White
                                    Height: =30
                                    Icon: =Icon.Settings
                                    OnSelect: =Set(varVisualizarEdicaoOrcamento, true);
                                    Visible: =varHistoricoExpandido = ThisItem.id_contrato_empreendimento
                                    Width: =40
                                    X: =Parent.Width - Self.Width - 10
                                    Y: =75
                                    ZIndex: =3

                                icn_expandir_2 As icon:
                                    BorderColor: =App.Theme.Colors.Darker40
                                    Color: =App.Theme.Colors.Darker30
                                    Height: =htmltxt_historico_2.Height - Self.Y * 2
                                    Icon: |
                                        =If(varHistoricoExpandido = ThisItem.id_contrato_empreendimento, Icon.ChevronUp, Icon.ChevronDown)
                                    OnSelect: |
                                        =UpdateContext({
                                            varHistoricoExpandido: If(varHistoricoExpandido = ThisItem.id_contrato_empreendimento, Blank(), ThisItem.id_contrato_empreendimento)
                                        });
                                        
                                        ClearCollect(colPlanejamentoEmpreendimento, Filter(db_fin_planejamento, id_contrato_empreendimento = ThisItem.id_contrato_empreendimento));
                                        
                                        
                                        If(Self.Icon = Icon.ChevronDown, 
                                            Set(varQuantidadeItensDetalhado, 0), 
                                                Set(varQuantidadeItensDetalhado, 
                                                    If(CountRows(colPlanejamentoEmpreendimento) = 0, 50, CountRows(colPlanejamentoEmpreendimento))));
                                    Width: =40
                                    X: =Parent.Width - Self.Width - 10
                                    Y: =15
                                    ZIndex: =4

                        Container34_5 As groupContainer.manualLayoutContainer:
                            DropShadow: =DropShadow.Semilight
                            Height: =Parent.TemplateHeight
                            PaddingLeft: =20
                            PaddingRight: =20
                            RadiusBottomLeft: =10
                            RadiusBottomRight: =10
                            RadiusTopLeft: =10
                            RadiusTopRight: =10
                            Width: =Parent.Width - 10
                            ZIndex: =2

                            HtmlText1_4 As htmlViewer:
                                Fill: =RGBA(255, 255, 255, 1)
                                Height: =Parent.Height
                                HtmlText: |-
                                    ="<div style='width:100%; font-family:Segoe UI; font-size:12px; color:#2d415d; padding:5px; border-bottom:1px solid white;'>
                                     <!-- Nome -->
                                     <div style='font-size:14px; font-weight:bold; margin-bottom:2px;'>
                                      " & Concatenate(ThisItem.n_contrato, " - ", ThisItem.objeto_reduzido) & "
                                     </div>
                                    
                                    <!-- Linha 1: SEI, Contratada, CNPJ Contratada, Data Assinatura -->
                                     <div style='display:flex; gap:20px; flex-wrap:wrap; margin-bottom:2px; line-height:1.2em;'>
                                    
                                      <div style='flex:1'><strong>SEI:</strong> " & ThisItem.processo_sei & "</div>
                                    
                                      <div style='flex:1'><strong>Data Assinatura:</strong> " & ThisItem.data_ass_contrato & "</div>
                                    
                                      <div style='flex:1'><strong>Data T√©rmino Prevista:</strong> " &
                                    
                                        DateAdd(ThisItem.data_ass_contrato, Sum(Filter(db_cont_econtratual, n_contrato = ThisItem.n_contrato), prazo_ec_dia), TimeUnit.Days)
                                    
                                      & "</div>
                                    
                                      <div style='flex:1'><strong>Valor Contrato:</strong> " & Text(ThisItem.valor_contrato_inicial, "[$-pt-BR]R$ #.##0,00") & "</div>
                                    
                                     </div>
                                    
                                    </div>"
                                Width: =Parent.Width
                                ZIndex: =1

                            icoSeta_5 As icon:
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Color: =App.Theme.Colors.Darker30
                                DisabledBorderColor: =
                                DisabledColor: =RGBA(202, 202, 202, 1)
                                DisabledFill: =RGBA(0, 0, 0, 0)
                                DisplayMode: =If(!IsEmpty(Filter(db_cont_empreendimento, n_contrato = ThisItem.n_contrato)), DisplayMode.Edit, DisplayMode.Disabled)
                                FocusedBorderThickness: =0
                                Height: =Parent.Height
                                HoverColor: =ColorFade(Self.Color, 10%)
                                HoverFill: =
                                Icon: |
                                    =If(varExpandido = ThisItem.ID, Icon.ChevronDown, Icon.ChevronRight)
                                OnSelect: |-
                                    =UpdateContext({varExpandido: If(varExpandido = ThisItem.ID, Blank(), ThisItem.ID)});
                                    Set(varQuantidadeItensDetalhado, 0);
                                    UpdateContext({varHistoricoExpandido: Blank()});
                                    
                                    If(Self.Icon = Icon.ChevronRight, 
                                        Set(varBordaOrcamento, true), Set(varBordaOrcamento, false))
                                PaddingBottom: =10
                                PaddingRight: =Self.Width-Self.Height
                                PaddingTop: =10
                                Width: |
                                    =60
                                X: =Parent.Width - Self.Width 
                                ZIndex: =2

